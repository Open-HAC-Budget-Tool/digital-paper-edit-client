{"version":3,"sources":["Components/lib/TranscriptViewer/SideBtns.js","Components/lib/TranscriptViewer/index.js"],"names":["SideBtns","handleExport","optionalBtns","useState","anchorMenuEl","setAnchorMenuEl","handleMenuClose","Grid","container","direction","justify","alignItems","Tooltip","title","Button","aria-controls","aria-haspopup","onClick","event","currentTarget","color","Menu","id","anchorEl","keepMounted","open","Boolean","onClose","MenuItem","disabled","Link","style","type","ext","speakers","timecodes","isDownload","atlasFormat","Divider","inlineTimecodes","hideTitle","subtitlesExportOptionsList","map","index","label","key","PLAYBACK_RATE_VALUES","mediaRef","React","createRef","debounce","current","play","SlateTranscriptEditor","props","currentTime","setCurrentTime","duration","setDuration","playbackRate","setPlaybackRate","editor","useMemo","withReact","withHistory","createEditor","value","setValue","defaultShowSpeakersPreference","showSpeakers","defaultShowTimecodesPreference","showTimecodes","speakerOptions","setSpeakerOptions","showSpeakersCheatShet","setShowSpeakersCheatShet","isProcessing","setIsProcessing","isContentModified","setIsContentIsModified","isContentSaved","setIsContentSaved","useEffect","document","body","cursor","transcriptData","res","convertDpeToSlate","uniqueSpeakers","pluck","getUniqueSpeakers","addEventListener","handleTimeUpdated","removeEventListener","getFileTitle","path","basename","mediaUrl","trim","e","target","renderElement","useCallback","element","TimedTextElement","DefaultElement","renderLeaf","attributes","children","leaf","onDoubleClick","handleTimedTextClick","className","data-start","parent","start","data-previous-timings","previousTimings","handleSetSpeakerName","ReactEditor","findPath","speaker","textLg","textXl","item","contentEditable","xs","sm","md","lg","xl","startTimecode","Typography","noWrap","width","textTransform","bind","classList","contains","dataset","parseFloat","handleAnalyticsEvents","fn","clickOrigin","timeInSeconds","slateString","parentNode","startWord","SlateHelpers","getSelectionNodes","selection","origin","handleRestoreTimecodes","a","async","updateBloocksTimestamps","alignedSlateData","alignedSlateDataWithInlineTimecodes","insertTimecodesInLineInSlateJs","paddingTop","CssBaseline","Container","Paper","elevation","scoped","generatePreviousTimingsUpToCurrent","showTitle","variant","spacing","backgroundColor","ref","src","height","controls","playsInline","shortTimecode","newCurrentTime","newCurrentTimeInSeconds","seekBackValue","block","FormControl","Select","labelId","onChange","previousPlaybackRate","n","tmpNewPlaybackRateValue","newPlaybackRate","playbackRateValue","gutterBottom","Collapse","in","speakerName","toUpperCase","length","handleAutoSaveChanges","readOnly","isEditable","tmpValue","isCaptionType","editorContnet","exportAdapter","slateValue","transcriptTitle","JSON","stringify","download","defaultProps","autoSaveContentType"],"mappings":"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","file":"static/js/6.350c633b.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Divider from '@material-ui/core/Divider';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport subtitlesExportOptionsList from 'slate-transcript-editor/util/export-adapters/subtitles-generator/list.js';\n\nfunction SideBtns({\n  handleExport,\n  optionalBtns,\n}) {\n  const [anchorMenuEl, setAnchorMenuEl] = useState(null);\n\n  // used by MUI export menu\n  const handleMenuClose = () => {\n    setAnchorMenuEl(null);\n  };\n\n  // used by MUI export menu\n  const handleMenuClick = (event) => {\n    setAnchorMenuEl(event.currentTarget);\n  };\n\n  return (\n    <Grid container direction=\"row\" justify=\"flex-start\" alignItems=\"flex-start\">\n      <div>\n        <Tooltip title={'Export options'}>\n          <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleMenuClick}>\n            <SaveAltIcon color=\"primary\" /> <KeyboardArrowDownIcon color=\"primary\" />\n          </Button>\n        </Tooltip>\n        <Menu id=\"simple-menu\" anchorEl={anchorMenuEl} keepMounted open={Boolean(anchorMenuEl)} onClose={handleMenuClose}>\n          <MenuItem onClick={handleMenuClose} disabled>\n            <Link style={{ color: 'black' }}>Text Export</Link>\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'text',\n                ext: 'txt',\n                speakers: false,\n                timecodes: false,\n                isDownload: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\">\n              Text (<code>.txt</code>)\n            </Link>\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'text',\n                ext: 'txt',\n                speakers: true,\n                timecodes: false,\n                isDownload: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\">Text (Speakers)</Link>\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'text',\n                ext: 'txt',\n                speakers: false,\n                timecodes: true,\n                isDownload: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\">Text (Timecodes)</Link>\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'text',\n                ext: 'txt',\n                speakers: true,\n                timecodes: true,\n                isDownload: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\"> Text (Speakers & Timecodes)</Link>\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'text',\n                ext: 'txt',\n                speakers: true,\n                timecodes: true,\n                atlasFormat: true,\n                isDownload: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\"> Text (Atlas format)</Link>\n          </MenuItem>\n          <Divider />\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'word',\n                ext: 'docx',\n                speakers: false,\n                timecodes: false,\n                isDownload: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\">\n              {' '}\n              Word (<code>.docx</code>)\n            </Link>\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'word',\n                ext: 'docx',\n                speakers: true,\n                timecodes: false,\n                isDownload: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\"> Word (Speakers)</Link>\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'word',\n                ext: 'docx',\n                speakers: false,\n                timecodes: true,\n                isDownload: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\"> Word (Timecodes)</Link>\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'word',\n                ext: 'docx',\n                speakers: true,\n                timecodes: true,\n                isDownload: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\"> Word (Speakers & Timecodes)</Link>\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'word',\n                ext: 'docx',\n                speakers: false,\n                timecodes: false,\n                inlineTimecodes: true,\n                hideTitle: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\"> Word (OHMS)</Link>\n          </MenuItem>\n          <Divider />\n          <MenuItem onClick={handleMenuClose} disabled>\n            <Link style={{ color: 'black' }}>Closed Captions Export</Link>\n          </MenuItem>\n          {subtitlesExportOptionsList.map(({ type, label, ext }, index) => {\n            return (\n              <MenuItem\n                key={index + label}\n                onClick={() => {\n                  handleExport({ type, ext, isDownload: true });\n                  handleMenuClose();\n                }}\n              >\n                <Link color=\"primary\">\n                  {label} (<code>.{ext}</code>)\n                </Link>\n              </MenuItem>\n            );\n          })}\n          <Divider />\n          <MenuItem onClick={handleMenuClose} disabled>\n            <Link style={{ color: 'black' }}>Developer options</Link>\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'json-slate',\n                ext: 'json',\n                speakers: true,\n                timecodes: true,\n                isDownload: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\">\n              SlateJs (<code>.json</code>)\n            </Link>\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              handleExport({\n                type: 'json-digitalpaperedit',\n                ext: 'json',\n                speakers: true,\n                timecodes: true,\n                isDownload: true,\n              });\n              handleMenuClose();\n            }}\n          >\n            <Link color=\"primary\">\n              DPE (<code>.json</code>)\n            </Link>\n          </MenuItem>\n        </Menu>\n      </div>\n\n      {optionalBtns}\n    </Grid>\n  );\n}\n\nexport default SideBtns;","import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport PropTypes, { string } from 'prop-types';\nimport path from 'path';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Link from '@material-ui/core/Link';\nimport Replay10Icon from '@material-ui/icons/Replay10';\nimport Collapse from '@material-ui/core/Collapse';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport debounce from 'lodash/debounce';\nimport { createEditor, Editor, Transforms } from 'slate';\n// https://docs.slatejs.org/walkthroughs/01-installing-slate\n// Import the Slate components and React plugin.\nimport { Slate, Editable, withReact, ReactEditor } from 'slate-react';\nimport { withHistory } from 'slate-history';\n\nimport SideBtns from './SideBtns';\nimport { shortTimecode } from 'slate-transcript-editor/util/timecode-converter';\nimport download from 'slate-transcript-editor/util/downlaod/index.js';\nimport convertDpeToSlate from 'slate-transcript-editor/util/dpe-to-slate';\n// TODO: This should be moved in export utils\nimport insertTimecodesInLineInSlateJs from 'slate-transcript-editor/util/insert-timecodes-in-line-in-words-list';\nimport pluck from 'slate-transcript-editor/util/pluk';\nimport plainTextalignToSlateJs from 'slate-transcript-editor/util/export-adapters/slate-to-dpe/update-timestamps/plain-text-align-to-slate';\nimport updateBloocksTimestamps from 'slate-transcript-editor/util/export-adapters/slate-to-dpe/update-timestamps/update-bloocks-timestamps';\nimport exportAdapter, { isCaptionType } from 'slate-transcript-editor/util/export-adapters';\nimport generatePreviousTimingsUpToCurrent from 'slate-transcript-editor/util/dpe-to-slate/generate-previous-timings-up-to-current';\nimport SlateHelpers from 'slate-transcript-editor/components/slate-helpers';\n\nconst PLAYBACK_RATE_VALUES = [0.2, 0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2, 2.25, 2.5, 3, 3.5];\nconst SEEK_BACK_SEC = 10;\nconst PAUSE_WHILTE_TYPING_TIMEOUT_MILLISECONDS = 1500;\n// const MAX_DURATION_FOR_PERFORMANCE_OPTIMIZATION_IN_SECONDS = 3600;\nconst REPLACE_WHOLE_TEXT_INSTRUCTION =\n  'Replace whole text. \\n\\nAdvanced feature, if you already have an accurate transcription for the whole text, and you want to restore timecodes for it, you can use this to replace the text in this transcript. \\n\\nFor now this is an experimental feature. \\n\\nIt expects plain text, with paragraph breaks as new line breaks but no speakers.';\n\nconst mediaRef = React.createRef();\n\nconst pauseWhileTypeing = (current) => {\n  current.play();\n};\nconst debouncePauseWhileTyping = debounce(pauseWhileTypeing, PAUSE_WHILTE_TYPING_TIMEOUT_MILLISECONDS);\n\nfunction SlateTranscriptEditor(props) {\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [playbackRate, setPlaybackRate] = useState(1);\n  const editor = useMemo(() => withReact(withHistory(createEditor())), []);\n  const [value, setValue] = useState([]);\n  const defaultShowSpeakersPreference = typeof props.showSpeakers === 'boolean' ? props.showSpeakers : true;\n  const defaultShowTimecodesPreference = typeof props.showTimecodes === 'boolean' ? props.showTimecodes : true;\n  const [showSpeakers, setShowSpeakers] = useState(defaultShowSpeakersPreference);\n  const [showTimecodes, setShowTimecodes] = useState(defaultShowTimecodesPreference);\n  const [speakerOptions, setSpeakerOptions] = useState([]);\n  const [showSpeakersCheatShet, setShowSpeakersCheatShet] = useState(false);\n  const [saveTimer, setSaveTimer] = useState(null);\n  const [isPauseWhiletyping, setIsPauseWhiletyping] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  // used isContentModified to avoid unecessarily run alignment if the slate value contnet has not been modified by the user since\n  // last save or alignment\n  const [isContentModified, setIsContentIsModified] = useState(false);\n  const [isContentSaved, setIsContentSaved] = useState(true);\n\n  useEffect(() => {\n    if (isProcessing) {\n      document.body.style.cursor = 'wait';\n    } else {\n      document.body.style.cursor = 'default';\n    }\n  }, [isProcessing]);\n\n  useEffect(() => {\n    if (props.transcriptData) {\n      const res = convertDpeToSlate(props.transcriptData);\n      setValue(res);\n    }\n  }, [props.transcriptData]);\n\n  useEffect(() => {\n    const getUniqueSpeakers = pluck('speaker');\n    const uniqueSpeakers = getUniqueSpeakers(value);\n    setSpeakerOptions(uniqueSpeakers);\n  }, [value]);\n\n  //  useEffect(() => {\n  //    const getUniqueSpeakers = pluck('speaker');\n  //    const uniqueSpeakers = getUniqueSpeakers(value);\n  //    setSpeakerOptions(uniqueSpeakers);\n  //  }, [showSpeakersCheatShet]);\n\n  useEffect(() => {\n    // Update the document title using the browser API\n    if (mediaRef && mediaRef.current) {\n      // setDuration(mediaRef.current.duration);\n      mediaRef.current.addEventListener('timeupdate', handleTimeUpdated);\n    }\n    return function cleanup() {\n      // removeEventListener\n      mediaRef.current.removeEventListener('timeupdate', handleTimeUpdated);\n    };\n  }, []);\n\n  useEffect(() => {}, [currentTime]);\n\n  // useEffect(() => {\n  //   // Update the document title using the browser API\n  //   if (mediaRef && mediaRef.current) {\n  //     // Not working\n  //     setDuration(mediaRef.current.duration);\n  //     if (mediaRef.current.duration >= MAX_DURATION_FOR_PERFORMANCE_OPTIMIZATION_IN_SECONDS) {\n  //       setShowSpeakers(false);\n  //       showTimecodes(false);\n  //     }\n  //   }\n  // }, [mediaRef]);\n\n  const getSlateContent = () => {\n    return value;\n  };\n\n  const getFileName = () => {\n    return path.basename(props.mediaUrl).trim();\n  };\n  const getFileTitle = () => {\n    if (props.title) {\n      return props.title;\n    }\n    return getFileName();\n  };\n\n  const handleTimeUpdated = (e) => {\n    setCurrentTime(e.target.currentTime);\n    // TODO: setting duration here as a workaround\n    setDuration(mediaRef.current.duration);\n    //  TODO: commenting this out for now, not sure if it will fire to often?\n    // if (props.handleAnalyticsEvents) {\n    //   // handles if click cancel and doesn't set speaker name\n    //   props.handleTimeUpdated('ste_handle_time_update', {\n    //     fn: 'handleTimeUpdated',\n    //     duration: mediaRef.current.duration,\n    //     currentTime: e.target.currentTime,\n    //   });\n    // }\n  };\n\n  const handleSetPlaybackRate = (e) => {\n    const previousPlaybackRate = playbackRate;\n    const n = e.target.value;\n    const tmpNewPlaybackRateValue = parseFloat(n);\n    if (mediaRef && mediaRef.current) {\n      mediaRef.current.playbackRate = tmpNewPlaybackRateValue;\n      setPlaybackRate(tmpNewPlaybackRateValue);\n\n      if (props.handleAnalyticsEvents) {\n        props.handleAnalyticsEvents('ste_handle_set_playback_rate', {\n          fn: 'handleSetPlaybackRate',\n          previousPlaybackRate,\n          newPlaybackRate: tmpNewPlaybackRateValue,\n        });\n      }\n    }\n  };\n\n  const handleSeekBack = () => {\n    if (mediaRef && mediaRef.current) {\n      const newCurrentTime = mediaRef.current.currentTime - SEEK_BACK_SEC;\n      mediaRef.current.currentTime = newCurrentTime;\n\n      if (props.handleAnalyticsEvents) {\n        props.handleAnalyticsEvents('ste_handle_seek_back', {\n          fn: 'handleSeekBack',\n          newCurrentTimeInSeconds: newCurrentTime,\n          seekBackValue: SEEK_BACK_SEC,\n        });\n      }\n    }\n  };\n\n  const renderElement = useCallback((props) => {\n    switch (props.element.type) {\n      case 'timedText':\n        return <TimedTextElement {...props} />;\n      default:\n        return <DefaultElement {...props} />;\n    }\n  }, []);\n\n  const renderLeaf = useCallback(({ attributes, children, leaf }) => {\n    return (\n      <span\n        onDoubleClick={handleTimedTextClick}\n        className={'timecode text'}\n        data-start={children.props.parent.start}\n        data-previous-timings={children.props.parent.previousTimings}\n        // title={'double click on a word to jump to the corresponding point in the media'}\n        {...attributes}\n      >\n        {children}\n      </span>\n    );\n  }, []);\n\n  //\n\n  /**\n   * `handleSetSpeakerName` is outside of TimedTextElement\n   * to improve the overall performance of the editor,\n   * especially on long transcripts\n   * @param {*} element - props.element, from `renderElement` function\n   */\n  const handleSetSpeakerName = (element) => {\n    const pathToCurrentNode = ReactEditor.findPath(editor, element);\n    const oldSpeakerName = element.speaker;\n    \n  };\n\n  const TimedTextElement = (props) => {\n    let textLg = 12;\n    let textXl = 12;\n    if (!showSpeakers && !showTimecodes) {\n      textLg = 12;\n      textXl = 12;\n    } else if (showSpeakers && !showTimecodes) {\n      textLg = 9;\n      textXl = 9;\n    } else if (!showSpeakers && showTimecodes) {\n      textLg = 9;\n      textXl = 10;\n    } else if (showSpeakers && showTimecodes) {\n      textLg = 6;\n      textXl = 7;\n    }\n\n    return (\n      <Grid container direction=\"row\" justify=\"flex-start\" alignItems=\"flex-start\" {...props.attributes}>\n        {showTimecodes && (\n          <Grid item contentEditable={false} xs={4} sm={2} md={4} lg={2} xl={2} className={'p-t-2 text-truncate'}>\n            <code\n              contentEditable={false}\n              style={{ cursor: 'pointer' }}\n              className={'timecode text-muted unselectable'}\n              onClick={handleTimedTextClick}\n              // onClick={(e) => {\n              //   e.preventDefault();\n              // }}\n              onDoubleClick={handleTimedTextClick}\n              title={props.element.startTimecode}\n              data-start={props.element.start}\n            >\n              {props.element.startTimecode}\n            </code>\n          </Grid>\n        )}\n        {showSpeakers && (\n          <Grid item contentEditable={false} xs={8} sm={10} md={8} lg={3} xl={3} className={'p-t-2 text-truncate'}>\n            <Typography\n              noWrap\n              contentEditable={false}\n              className={'text-truncate text-muted unselectable'}\n              style={{\n                cursor: 'pointer',\n                width: '100%',\n                textTransform: 'uppercase',\n              }}\n              // title={props.element.speaker.toUpperCase()}\n              title={props.element.speaker}\n              onClick={handleSetSpeakerName.bind(this, props.element)}\n            >\n              {props.element.speaker}\n            </Typography>\n          </Grid>\n        )}\n        <Grid item xs={12} sm={12} md={12} lg={textLg} xl={textXl} className={'p-b-1 mx-auto'}>\n          {props.children}\n        </Grid>\n      </Grid>\n    );\n  };\n\n  const DefaultElement = (props) => {\n    return <p {...props.attributes}>{props.children}</p>;\n  };\n\n  const handleTimedTextClick = (e) => {\n    if (e.target.classList.contains('timecode')) {\n      const start = e.target.dataset.start;\n      if (mediaRef && mediaRef.current) {\n        mediaRef.current.currentTime = parseFloat(start);\n        mediaRef.current.play();\n\n        if (props.handleAnalyticsEvents) {\n          // handles if click cancel and doesn't set speaker name\n          props.handleAnalyticsEvents('ste_handle_timed_text_click', {\n            fn: 'handleTimedTextClick',\n            clickOrigin: 'timecode',\n            timeInSeconds: mediaRef.current.currentTime,\n          });\n        }\n      }\n    } else if (e.target.dataset.slateString) {\n      if (e.target.parentNode.dataset.start) {\n        const { startWord } = SlateHelpers.getSelectionNodes(editor, editor.selection);\n        if (mediaRef && mediaRef.current && startWord && startWord.start) {\n          mediaRef.current.currentTime = parseFloat(startWord.start);\n          mediaRef.current.play();\n\n          if (props.handleAnalyticsEvents) {\n            // handles if click cancel and doesn't set speaker name\n            props.handleAnalyticsEvents('ste_handle_timed_text_click', {\n              fn: 'handleTimedTextClick',\n              clickOrigin: 'word',\n              timeInSeconds: mediaRef.current.currentTime,\n            });\n          }\n        } else {\n          // fallback in case there's some misalignment with the words\n          // use the start of paragraph instead\n          const start = parseFloat(e.target.parentNode.dataset.start);\n          if (mediaRef && mediaRef.current && start) {\n            mediaRef.current.currentTime = parseFloat(start);\n            mediaRef.current.play();\n\n            if (props.handleAnalyticsEvents) {\n              // handles if click cancel and doesn't set speaker name\n              props.handleAnalyticsEvents('ste_handle_timed_text_click', {\n                fn: 'handleTimedTextClick',\n                origin: 'paragraph-fallback',\n                timeInSeconds: mediaRef.current.currentTime,\n              });\n            }\n          }\n        }\n      }\n    }\n  };\n\n  const handleReplaceText = () => {\n    const newText = prompt(`Paste the text to replace here.\\n\\n${REPLACE_WHOLE_TEXT_INSTRUCTION}`);\n    if (newText) {\n      const newValue = plainTextalignToSlateJs(props.transcriptData, newText, value);\n      setValue(newValue);\n\n      // TODO: consider adding some kind of word count here?\n      if (props.handleAnalyticsEvents) {\n        // handles if click cancel and doesn't set speaker name\n        props.handleAnalyticsEvents('ste_handle_replace_text', {\n          fn: 'handleReplaceText',\n        });\n      }\n    }\n  };\n\n  // TODO: refacto this function, to be cleaner and easier to follow.\n  const handleRestoreTimecodes = async (inlineTimecodes = false) => {\n    // if nothing as changed and you don't need to modify the data\n    // to get inline timecodes, then just return as is\n    if (!isContentModified && !inlineTimecodes) {\n      return value;\n    }\n    // only used by Word (OHMS) export\n    const alignedSlateData = await updateBloocksTimestamps(value, inlineTimecodes);\n    setValue(alignedSlateData);\n    setIsContentIsModified(false);\n\n    if (inlineTimecodes) {\n      // we don't want to show the inline timecode in the editor, but we want to return them to export function\n      const alignedSlateDataWithInlineTimecodes = insertTimecodesInLineInSlateJs(alignedSlateData);\n      return alignedSlateDataWithInlineTimecodes;\n    }\n\n    return alignedSlateData;\n  };\n\n  // TODO: this could be refactore, and brought some of this logic inside the exportAdapter (?)\n  // To make this a little cleaner\n  const handleExport = async ({ type, ext, speakers, timecodes, inlineTimecodes, hideTitle, atlasFormat, isDownload }) => {\n    if (props.handleAnalyticsEvents) {\n      // handles if click cancel and doesn't set speaker name\n      props.handleAnalyticsEvents('ste_handle_export', {\n        fn: 'handleExport',\n        type,\n        ext,\n        speakers,\n        timecodes,\n        inlineTimecodes,\n        hideTitle,\n        atlasFormat,\n        isDownload,\n      });\n    }\n\n    try {\n      setIsProcessing(true);\n      let tmpValue = getSlateContent();\n      if (timecodes) {\n        tmpValue = await handleRestoreTimecodes();\n      }\n\n      if (inlineTimecodes) {\n        tmpValue = await handleRestoreTimecodes(inlineTimecodes);\n      }\n\n      if (isContentModified && type === 'json-slate') {\n        tmpValue = await handleRestoreTimecodes();\n      }\n\n      if (isContentModified && type === 'json-digitalpaperedit') {\n        tmpValue = await handleRestoreTimecodes();\n      }\n\n      if (isContentModified && isCaptionType(type)) {\n        tmpValue = await handleRestoreTimecodes();\n      }\n      // export adapter does not doo any alignment\n      // just converts between formats\n      let editorContnet = exportAdapter({\n        slateValue: tmpValue,\n        type,\n        transcriptTitle: getFileTitle(),\n        speakers,\n        timecodes,\n        inlineTimecodes,\n        hideTitle,\n        atlasFormat,\n      });\n\n      if (ext === 'json') {\n        editorContnet = JSON.stringify(editorContnet, null, 2);\n      }\n      if (ext !== 'docx' && isDownload) {\n        download(editorContnet, `${getFileTitle()}.${ext}`);\n      }\n      return editorContnet;\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return (\n    <div style={{ paddingTop: '1em' }}>\n      <CssBaseline />\n      <Container>\n        <Paper elevation={3} />\n        <style scoped>\n          {`/* Next words */\n             .timecode[data-previous-timings*=\"${generatePreviousTimingsUpToCurrent(currentTime)}\"]{\n                  color:  #9E9E9E;\n              }\n              // NOTE: The CSS is here, coz if you put it as a separate index.css the current webpack does not bundle it with the component\n              /* TODO: Temporary, need to scope this to the component in a sensible way */\n              .editor-wrapper-container {\n                font-family: Roboto, sans-serif;\n              }\n              .editor-wrapper-container {\n                padding: 8px 16px;\n                height: 90vh;\n                overflow: auto;\n              }\n              /* https://developer.mozilla.org/en-US/docs/Web/CSS/user-select\n              TODO: only working in Chrome, not working in Firefox, and Safari - OSX\n              if selecting text, not showing selection\n              Commented out because it means cannot select speakers and timecode anymore\n              which is the intended default behavior but needs to come with export\n              functionality to export as plain text, word etc.. otherwise user won't be able\n              to get text out of component with timecodes and speaker names in the interim */\n              .unselectable {\n                -moz-user-select: none;\n                -webkit-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n              }\n              .timecode:hover {\n                text-decoration: underline;\n              }\n              .timecode.text:hover {\n                text-decoration: none;\n              }\n          `}\n        </style>\n        {props.showTitle && (\n          <Tooltip title={props.title}>\n            <Typography variant=\"h5\" noWrap>\n              {props.title}\n            </Typography>\n          </Tooltip>\n        )}\n\n        <Grid container direction=\"row\" justify=\"space-around\" alignItems=\"flex-start\" spacing={2}>\n          <Grid item xs={12} sm={4} md={4} lg={4} xl={4}>\n            <Grid container direction=\"column\" justify=\"space-between\" alignItems=\"flex-start\">\n              <Grid item style={{ backgroundColor: 'black' }}>\n                <video ref={mediaRef} src={props.mediaUrl} width={'100%'} height=\"auto\" controls playsInline></video>\n              </Grid>\n              <Grid item>\n                <Grid container direction=\"row\" justify=\"space-between\" alignItems=\"center\" spacing={1}>\n                  <Grid item>\n                    <p>\n                      <code style={{ color: 'grey' }}>{shortTimecode(currentTime)}</code>\n                      <span style={{ color: 'grey' }}> {` | `}</span>\n                      <code style={{ color: 'grey' }}>{duration ? `${shortTimecode(duration)}` : '00:00:00'}</code>\n                    </p>\n                  </Grid>\n\n                  <Grid item>\n                    <Tooltip title={`Seek back by ${SEEK_BACK_SEC} seconds`}>\n                      <Button color=\"primary\" onClick={handleSeekBack} block=\"true\">\n                        <Replay10Icon color=\"primary\" />\n                      </Button>\n                    </Tooltip>\n                    {/* </OverlayTrigger> */}\n                  </Grid>\n                  <Grid item>\n                    <FormControl>\n                      {/* <InputLabel id=\"demo-simple-select-label\">Speed</InputLabel> */}\n                      <Select labelId=\"demo-simple-select-label\" id=\"demo-simple-select\" value={playbackRate} onChange={handleSetPlaybackRate}>\n                        {PLAYBACK_RATE_VALUES.map((playbackRateValue, index) => {\n                          return (\n                            <MenuItem key={index + playbackRateValue} value={playbackRateValue}>\n                              {' '}\n                              x {playbackRateValue}\n                            </MenuItem>\n                          );\n                        })}\n                      </Select>\n                      {/* <FormHelperText>Speed</FormHelperText> */}\n                    </FormControl>\n                  </Grid>\n                </Grid>\n              </Grid>\n\n              <Grid item>\n                <Link\n                  color=\"inherit\"\n                  onClick={() => {\n                    setShowSpeakersCheatShet(!showSpeakersCheatShet);\n                  }}\n                >\n                  <Typography variant=\"subtitle2\" gutterBottom>\n                    Speakers\n                  </Typography>\n                </Link>\n\n                <Collapse in={showSpeakersCheatShet}>\n                  {speakerOptions.map((speakerName, index) => {\n                    return (\n                      <Typography\n                        variant=\"body2\"\n                        gutterBottom\n                        key={index + speakerName}\n                        className={'text-truncate'}\n                        title={speakerName.toUpperCase()}\n                      >\n                        {speakerName}\n                      </Typography>\n                    );\n                  })}\n                </Collapse>\n              </Grid>\n              <Grid item>{props.children}</Grid>\n            </Grid>\n          </Grid>\n\n          <Grid item xs={12} sm={7} md={7} lg={7} xl={7}>\n            {value.length !== 0 ? (\n              <>\n                <Paper elevation={3}>\n                  <section className=\"editor-wrapper-container\">\n                    <Slate\n                      editor={editor}\n                      value={value}\n                      onChange={(value) => {\n                        if (props.handleAutoSaveChanges) {\n                          props.handleAutoSaveChanges(value);\n                          setIsContentSaved(true);\n                        }\n                        return setValue(value);\n                      }}\n                    >\n                      <Editable\n                        readOnly={typeof props.isEditable === 'boolean' ? !props.isEditable : false}\n                        renderElement={renderElement}\n                        renderLeaf={renderLeaf}\n                      />\n                    </Slate>\n                  </section>\n                </Paper>\n              </>\n            ) : (\n              <section className=\"text-center\">\n                <i className=\"text-center\">Loading...</i>\n              </section>\n            )}\n          </Grid>\n\n          <Grid item xs={12} sm={1} md={1} lg={1} xl={1}>\n            <SideBtns\n              handleExport={handleExport}\n              isProcessing={isProcessing}\n              isContentModified={isContentModified}\n              isContentSaved={isContentSaved}\n              setIsProcessing={setIsProcessing}\n              optionalBtns={props.optionalBtns}\n            />\n          </Grid>\n        </Grid>\n      </Container>\n    </div>\n  );\n}\n\nexport default SlateTranscriptEditor;\n\nSlateTranscriptEditor.propTypes = {\n  transcriptData: PropTypes.object.isRequired,\n  mediaUrl: PropTypes.string.isRequired,\n  handleSaveEditor: PropTypes.func,\n  handleAutoSaveChanges: PropTypes.func,\n  autoSaveContentType: PropTypes.string,\n  isEditable: PropTypes.bool,\n  showTimecodes: PropTypes.bool,\n  showSpeakers: PropTypes.bool,\n  title: PropTypes.string,\n  showTitle: PropTypes.bool,\n};\n\nSlateTranscriptEditor.defaultProps = {\n  showTitle: false,\n  showTimecodes: true,\n  showSpeakers: true,\n  autoSaveContentType: 'digitalpaperedit',\n  isEditable: true,\n};"],"sourceRoot":""}