(this["webpackJsonp@pietrop/digital-paper-edit-client"]=this["webpackJsonp@pietrop/digital-paper-edit-client"]||[]).push([[0],{101:function(e,t,a){"use strict";(function(e,a){function r(){if(void 0===window.process||void 0===window.process.versions||void 0===window.process.versions.node)return void 0!==window.process&&"demo"===window.process.env.REACT_APP_NODE_ENV?"demo":"browser";if(window.process.versions.electron&&void 0!==window.process.versions.electron)return"electron";if(void 0!==window.process.versions.cep){try{e.chdir(a)}catch(t){console.log("chdir: "+t)}return"cep"}console.error("couldn't determine the js environment")}t.a=r}).call(this,a(122),"/")},145:function(e,t,a){e.exports={speaker:"Paragraphs_speaker__2hb7q",unselectable:"Paragraphs_unselectable__-gkJp",highlightedWord:"Paragraphs_highlightedWord__2R7lz"}},215:function(e,t,a){e.exports=a(428)},220:function(e,t,a){},428:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(22),o=a.n(s),c=(a(220),a(221),Object(r.createContext)()),i=a(55),l=a.n(i),p=a(31),u=a(209),d=a(1),h=a.n(d),m=a(28),f=a(15),g=a(7),b=a(52),v=a.n(b),w=a(210),E=a(9),S=a(8);var y=function(){var e=n.a.createElement(w.a,{collapseOnSelect:!0,expand:"md",bg:"light",variant:"light",fixed:"bottom",className:"justify-content-center"},n.a.createElement(E.a,{icon:S.i})," ",n.a.createElement("small",null,"This is a prototype by "," ",n.a.createElement("a",{href:"http://bbcnewslabs.co.uk",target:"_blank",rel:"noopener noreferrer"},"BBC News Labs")));return n.a.createElement(f.a,null,n.a.createElement(g.a,{className:"d-none d-sm-block"},e),n.a.createElement(g.a,{className:"d-lg-block d-md-block"},e))},x=a(23),j=function(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0},k=a(193),T=a.n(k),P=a(194),O=a.n(P),C=a(195),I=a.n(C),L=a(12),A=a(13),N=a(17),D=a(16),U=a(18),F=a(37),M=a(11),R=a(196),J=a.n(R),W=["GET","POST","PUT","DELETE"],_=function(e){if(!W.includes(e))throw new Error("Wrong method passed ".concat(e," - should be one of ").concat(W))},q=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return"PUT"===e?t={method:e,mode:"cors",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}:"POST"===e?(t={method:e},"json"===r?(t.headers={"Content-Type":"application/json"},t.body=JSON.stringify(a)):t.body=a):t={method:e,mode:"cors"},t};var H=function(e){var t,a,r,n,s=arguments;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:"GET",a=s.length>2&&void 0!==s[2]?s[2]:{},r=s.length>3?s[3]:void 0,_(t),n=q(t,a,r),o.next=7,h.a.awrap(fetch(e,n));case 7:return o.abrupt("return",o.sent);case 8:case"end":return o.stop()}}))},B=function(){function e(){var t=this;Object(L.a)(this,e),this.projectsIdUrl=function(e){return"".concat(t.projectsUrl,"/").concat(e)},this.transcriptsUrl=function(e){return"".concat(t.projectsIdUrl(e),"/transcripts")},this.transcriptsIdUrl=function(e,a,r){var n=r?"?".concat(J.a.stringify(r)):"";return"".concat(t.transcriptsUrl(e),"/").concat(a).concat(n).trim()},this.paperEditsUrl=function(e){return"".concat(t.projectsIdUrl(e),"/paperedits")},this.paperEditsIdUrl=function(e,a){return"".concat(t.projectsIdUrl(e),"/paperedits/").concat(a)},this.annotationsUrl=function(e,a){return"".concat(t.transcriptsIdUrl(e,a),"/annotations")},this.annotationsIdUrl=function(e,a,r){return"".concat(t.transcriptsIdUrl(e,a),"/annotations/").concat(r)},this.labelsUrl=function(e){return"".concat(t.projectsIdUrl(e),"/labels")},this.labelsIdUrl=function(e,a){return"".concat(t.projectsIdUrl(e),"/labels/").concat(a)},this.baseUrl=window.env.API_URL,window.env.API_URL=null,this.projectsUrl="".concat(this.baseUrl,"/api/projects")}return Object(A.a)(e,[{key:"getAllProjects",value:function(){var e,t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(H(this.projectsUrl));case 2:return e=a.sent,a.next=5,h.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",t.projects);case 7:case"end":return a.stop()}}),null,this)}},{key:"getProject",value:function(e){var t,a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.awrap(H(this.projectsIdUrl(e)));case 2:return t=r.sent,r.next=5,h.a.awrap(t.json());case 5:return a=r.sent,r.abrupt("return",a);case 7:case"end":return r.stop()}}),null,this)}},{key:"createProject",value:function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(H(this.projectsUrl,"POST",e,"json"));case 2:return t=a.sent,a.next=5,h.a.awrap(t.json());case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}),null,this)}},{key:"updateProject",value:function(e,t){var a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(H(this.projectsIdUrl(e),"PUT",t));case 2:return a=n.sent,n.next=5,h.a.awrap(a.json());case 5:return r=n.sent,n.abrupt("return",r);case 7:case"end":return n.stop()}}),null,this)}},{key:"deleteProject",value:function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(H(this.projectsIdUrl(e),"DELETE"));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}),null,this)}},{key:"getTranscripts",value:function(e){var t,a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.awrap(H(this.transcriptsUrl(e)));case 2:return t=r.sent,r.next=5,h.a.awrap(t.json());case 5:return a=r.sent,r.abrupt("return",a);case 7:case"end":return r.stop()}}),null,this)}},{key:"createTranscript",value:function(e,t){var a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(H(this.transcriptsUrl(e),"POST",t));case 2:return a=n.sent,n.next=5,h.a.awrap(a.json());case 5:return r=n.sent,n.abrupt("return",r);case 7:case"end":return n.stop()}}),null,this)}},{key:"getTranscript",value:function(e,t,a){var r,n,s;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,h.a.awrap(H(this.transcriptsIdUrl(e,t,a)));case 2:return r=o.sent,o.next=5,h.a.awrap(r.json());case 5:return n=o.sent,o.next=8,h.a.awrap(this.getProject(e));case 8:return s=o.sent,n.projectTitle=s.project.title,n.transcriptTitle=n.title,delete n.title,o.abrupt("return",n);case 13:case"end":return o.stop()}}),null,this)}},{key:"updateTranscript",value:function(e,t,a,r){var n;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.awrap(H(this.transcriptsIdUrl(e,t,a),"PUT",r));case 2:return n=s.sent,s.abrupt("return",n);case 4:case"end":return s.stop()}}),null,this)}},{key:"deleteTranscript",value:function(e,t){var a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.awrap(H(this.transcriptsIdUrl(e,t),"DELETE"));case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}}),null,this)}},{key:"getAllAnnotations",value:function(e,t){var a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(fetch(this.annotationsUrl(e,t)));case 2:return a=n.sent,n.next=5,h.a.awrap(a.json());case 5:return r=n.sent,n.abrupt("return",r);case 7:case"end":return n.stop()}}),null,this)}},{key:"getAnnotation",value:function(e,t,a){var r,n;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.awrap(H(this.annotationsIdUrl(e,t,a)));case 2:return r=s.sent,s.next=5,h.a.awrap(r.json());case 5:return n=s.sent,s.abrupt("return",n);case 7:case"end":return s.stop()}}),null,this)}},{key:"createAnnotation",value:function(e,t,a){var r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(H(this.annotationsUrl(e,t),"POST",a,"json"));case 2:return r=n.sent,n.next=5,h.a.awrap(r.json());case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),null,this)}},{key:"updateAnnotation",value:function(e,t,a,r){var n,s;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,h.a.awrap(H(this.annotationsIdUrl(e,t,a),"PUT",r));case 2:return n=o.sent,o.next=5,h.a.awrap(n.json());case 5:return s=o.sent,o.abrupt("return",s);case 7:case"end":return o.stop()}}),null,this)}},{key:"deleteAnnotation",value:function(e,t,a){var r,n;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.awrap(H(this.annotationsIdUrl(e,t,a),"DELETE"));case 2:return r=s.sent,s.next=5,h.a.awrap(r.json());case 5:return n=s.sent,s.abrupt("return",n);case 7:case"end":return s.stop()}}),null,this)}},{key:"getAllLabels",value:function(e){var t,a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.awrap(fetch(this.labelsUrl(e)));case 2:return t=r.sent,r.next=5,h.a.awrap(t.json());case 5:return a=r.sent,r.abrupt("return",a);case 7:case"end":return r.stop()}}),null,this)}},{key:"getLabel",value:function(e,t){var a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(H(this.labelsIdUrl(e,t)));case 2:return a=n.sent,n.next=5,h.a.awrap(a.json());case 5:return r=n.sent,n.abrupt("return",r);case 7:case"end":return n.stop()}}),null,this)}},{key:"createLabel",value:function(e,t){var a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(H(this.labelsUrl(e),"POST",t,"json"));case 2:return a=n.sent,n.next=5,h.a.awrap(a.json());case 5:return r=n.sent,n.abrupt("return",r);case 7:case"end":return n.stop()}}),null,this)}},{key:"updateLabel",value:function(e,t,a){var r,n;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.awrap(H(this.labelsIdUrl(e,t),"PUT",a));case 2:return r=s.sent,s.next=5,h.a.awrap(r.json());case 5:return n=s.sent,s.abrupt("return",n);case 7:case"end":return s.stop()}}),null,this)}},{key:"deleteLabel",value:function(e,t){var a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(H(this.labelsIdUrl(e,t),"DELETE"));case 2:return a=n.sent,n.next=5,h.a.awrap(a.json());case 5:return r=n.sent,n.abrupt("return",r);case 7:case"end":return n.stop()}}),null,this)}},{key:"getAllPaperEdits",value:function(e){var t,a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.awrap(H(this.paperEditsUrl(e)));case 2:return t=r.sent,r.next=5,h.a.awrap(t.json());case 5:return a=r.sent,r.abrupt("return",a.paperedits);case 7:case"end":return r.stop()}}),null,this)}},{key:"getPaperEdit",value:function(e,t){var a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(H(this.paperEditsIdUrl(e,t)));case 2:return a=n.sent,n.next=5,h.a.awrap(a.json());case 5:return r=n.sent,n.abrupt("return",r);case 7:case"end":return n.stop()}}),null,this)}},{key:"createPaperEdit",value:function(e,t){var a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.awrap(H(this.paperEditsUrl(e),"POST",t,"json"));case 2:return a=r.sent,r.next=5,h.a.awrap(a.json());case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),null,this)}},{key:"updatePaperEdit",value:function(e,t,a){var r,n;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.awrap(H(this.paperEditsIdUrl(e,t),"PUT",a));case 2:return r=s.sent,s.next=5,h.a.awrap(r.json());case 5:return n=s.sent,s.abrupt("return",n);case 7:case"end":return s.stop()}}),null,this)}},{key:"deletePaperEdit",value:function(e,t){var a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.awrap(H(this.paperEditsIdUrl(e,t),"DELETE"));case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}}),null,this)}},{key:"getTranscriptLabelsAnnotations",value:function(e,t){var a,r,n,s;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,h.a.awrap(this.getTranscript(e,t));case 2:return a=o.sent,o.next=5,h.a.awrap(this.getAllLabels(e,t));case 5:return r=o.sent,o.next=8,h.a.awrap(this.getAllAnnotations(e,t));case 8:return n=o.sent,s={transcriptId:t,projectId:e,projectTitle:a.projectTitle,transcriptTitle:a.transcriptTitle,url:a.url,labels:r.labels,transcript:a.transcript,annotations:n.annotations},o.abrupt("return",s);case 11:case"end":return o.stop()}}),null,this)}},{key:"getProgrammeScriptAndTranscripts",value:function(e,t){var a,r,n,s,o,c,i,l=this;return h.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,h.a.awrap(this.getTranscripts(e));case 2:return a=p.sent,p.next=5,h.a.awrap(Promise.all(a.transcripts.map((function(t){return l.getTranscript(e,t.id)}))));case 5:return r=p.sent,p.next=8,h.a.awrap(Promise.all(a.transcripts.map((function(t){return l.getAllAnnotations(e,t.id)}))));case 8:return n=p.sent,r.forEach((function(e){var t=n.find((function(t){return t.transcriptId===e.id}));e.annotations=t?t.annotations:[]})),p.next=12,h.a.awrap(this.getPaperEdit(e,t));case 12:return s=p.sent,p.next=15,h.a.awrap(this.getProject(e));case 15:return o=p.sent,p.next=18,h.a.awrap(this.getAllLabels(e));case 18:return c=p.sent,i={programmeScript:s.programmeScript,project:o.project,transcripts:r,labels:c.labels},p.abrupt("return",i);case 21:case"end":return p.stop()}}),null,this)}}]),e}(),V=function(){function e(){Object(L.a)(this,e),this.url="db/",this.projects=this.url+"projects.json",this.paperEdits=this.url+"paperedits.json",this.transcripts=this.url+"transcripts.json",this.labels=this.url+"labels.json",this.annotations=this.url+"annotations.json"}return Object(A.a)(e,[{key:"getAllProjects",value:function(){var e,t,a;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.awrap(fetch(this.projects));case 2:return e=r.sent,r.next=5,h.a.awrap(e.json());case 5:if(t=r.sent,0,0===t.length){r.next=10;break}return a=t.map((function(e){return e.id=e._id,e})),r.abrupt("return",a);case 10:case"end":return r.stop()}}),null,this)}},{key:"getProject",value:function(e){var t,a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(fetch(this.projects));case 2:return t=n.sent,n.next=5,h.a.awrap(t.json());case 5:return a=n.sent,r=a.find((function(t){return t._id===e})),n.abrupt("return",{status:"ok",project:r});case 8:case"end":return n.stop()}}),null,this)}},{key:"createProject",value:function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return alert("Not implemented in demo mode"),console.log(e),t.abrupt("return",{status:"false"});case 3:case"end":return t.stop()}}))}},{key:"updateProject",value:function(e,t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t),a.abrupt("return",{status:"false"});case 3:case"end":return a.stop()}}))}},{key:"deleteProject",value:function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return alert("Not implemented in demo mode"),console.log(e),t.abrupt("return",{ok:!1,status:"false",project:{}});case 3:case"end":return t.stop()}}))}},{key:"getTranscripts",value:function(e){var t,a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(fetch(this.transcripts));case 2:return t=n.sent,n.next=5,h.a.awrap(t.json());case 5:return a=n.sent,r=a.filter((function(t){return t.projectId===e})).map((function(e){return e.id=e._id,e})),n.abrupt("return",{transcripts:r});case 8:case"end":return n.stop()}}),null,this)}},{key:"createTranscript",value:function(e,t,a){return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t,a),r.abrupt("return",{status:"false"});case 3:case"end":return r.stop()}}))}},{key:"getTranscript",value:function(e,t,a){var r,n,s,o;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(fetch(this.transcripts));case 2:return r=a.sent,a.next=5,h.a.awrap(r.json());case 5:return n=a.sent,(s=n.find((function(e){return e._id===t}))).id=s._id,a.next=10,h.a.awrap(this.getProject(e));case 10:return o=a.sent,s.projectTitle=o.project.title,s.transcriptTitle=s.title,a.abrupt("return",s);case 14:case"end":return a.stop()}}),null,this)}},{key:"updateTranscript",value:function(e,t,a,r){return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t,a,r),n.abrupt("return",{ok:!1});case 3:case"end":return n.stop()}}))}},{key:"deleteTranscript",value:function(e,t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t),a.abrupt("return",{ok:!1,status:"false"});case 3:case"end":return a.stop()}}))}},{key:"getAllAnnotations",value:function(e,t){var a,r;return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.awrap(fetch(this.annotations));case 2:return a=e.sent,e.next=5,h.a.awrap(a.json());case 5:return r=(r=(r=e.sent).filter((function(e){return e.transcriptId===t})))?r.map((function(e){return e.id=e._id,e})):[],e.abrupt("return",{annotations:r});case 9:case"end":return e.stop()}}),null,this)}},{key:"getAnnotation",value:function(e,t,a){var r,n,s;return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.awrap(fetch(this.annotations));case 2:return r=e.sent,e.next=5,h.a.awrap(r.json());case 5:return n=e.sent,s=n[0],e.abrupt("return",{annotation:s});case 8:case"end":return e.stop()}}),null,this)}},{key:"createAnnotation",value:function(e,t,a){return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t,a),r.abrupt("return",{ok:!1,status:"false",annotation:[]});case 3:case"end":return r.stop()}}))}},{key:"deleteAnnotation",value:function(e,t,a){return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t,a),r.abrupt("return",{ok:!1,status:"false"});case 3:case"end":return r.stop()}}))}},{key:"getAllLabels",value:function(e){var t,a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(fetch(this.labels));case 2:return t=n.sent,n.next=5,h.a.awrap(t.json());case 5:return a=n.sent,r=a[0],(a=a.filter((function(t){return t.projectId===e}))).unshift(r),a||(a=[]),n.abrupt("return",{ok:!0,status:"ok",labels:a});case 11:case"end":return n.stop()}}),null,this)}},{key:"getLabel",value:function(e,t){var a,r,n;return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.awrap(fetch(this.labels));case 2:return a=e.sent,e.next=5,h.a.awrap(a.json());case 5:return r=e.sent,n=r[0],e.abrupt("return",{ok:!0,status:"ok",label:n});case 8:case"end":return e.stop()}}),null,this)}},{key:"createLabel",value:function(e,t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t),a.abrupt("return",{ok:!1,status:"false"});case 3:case"end":return a.stop()}}))}},{key:"updateLabel",value:function(e,t,a){return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t,a),r.abrupt("return",{ok:!1,status:"false"});case 3:case"end":return r.stop()}}))}},{key:"deleteLabel",value:function(e,t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t),a.abrupt("return",{status:"false"});case 3:case"end":return a.stop()}}))}},{key:"getAllPaperEdits",value:function(e){var t,a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(fetch(this.paperEdits));case 2:return t=n.sent,n.next=5,h.a.awrap(t.json());case 5:return a=(a=n.sent).filter((function(t){return t.projectId===e})),(r={}).paperedits=[],r.paperedits=a,r.paperedits&&(r.paperedits=r.paperedits.map((function(e){return e.id=e._id,e}))),n.abrupt("return",r.paperedits);case 12:case"end":return n.stop()}}),null,this)}},{key:"getPaperEdit",value:function(e,t){var a,r,n,s;return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,e.next=3,h.a.awrap(fetch(this.paperEdits));case 3:return r=e.sent,e.next=6,h.a.awrap(r.json());case 6:return n=e.sent,(s=n.find((function(e){return e.id===a})))||(new Error("No paper edit found").statusCode=404),e.abrupt("return",{ok:!0,status:"ok",programmeScript:s});case 10:case"end":return e.stop()}}),null,this)}},{key:"createPaperEdit",value:function(e,t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t),a.abrupt("return",{ok:!1,status:"false"});case 3:case"end":return a.stop()}}))}},{key:"updatePaperEdit",value:function(e,t,a){return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t,a),r.abrupt("return",{ok:!0,status:"false"});case 3:case"end":return r.stop()}}))}},{key:"deletePaperEdit",value:function(e,t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return alert("Not implemented in demo mode"),console.log(e,t),a.abrupt("return",{ok:!1,status:"false"});case 3:case"end":return a.stop()}}))}},{key:"getTranscriptLabelsAnnotations",value:function(e,t){var a,r,n,s;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,h.a.awrap(this.getTranscript(e,t));case 2:return a=o.sent,o.next=5,h.a.awrap(this.getAllLabels(e,t));case 5:return r=o.sent,o.next=8,h.a.awrap(this.getAllAnnotations(e,t));case 8:return n=o.sent,s={transcriptId:t,projectId:e,projectTitle:a.projectTitle,transcriptTitle:a.transcriptTitle,url:a.url,labels:r.labels,transcript:a.transcript,annotations:n.annotations},o.abrupt("return",s);case 11:case"end":return o.stop()}}),null,this)}},{key:"getProgrammeScriptAndTranscripts",value:function(e,t){var a,r,n,s,o,c,i,l=this;return h.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,h.a.awrap(this.getTranscripts(e));case 2:return a=p.sent,p.next=5,h.a.awrap(Promise.all(a.transcripts.map((function(t){return l.getTranscript(e,t.id)}))));case 5:return r=p.sent,p.next=8,h.a.awrap(Promise.all(a.transcripts.map((function(t){return l.getAllAnnotations(e,t.id)}))));case 8:return n=p.sent,r.forEach((function(e){var t=n.find((function(t){return t.transcriptId===e.id}));e.annotations=t?t.annotations:[]})),p.next=12,h.a.awrap(this.getPaperEdit(e,t));case 12:return s=p.sent,p.next=15,h.a.awrap(this.getProject(e));case 15:return o=p.sent,p.next=18,h.a.awrap(this.getAllLabels(e));case 18:return c=p.sent,i={programmeScript:s.programmeScript,project:o.project,transcripts:r,labels:c.labels},p.abrupt("return",i);case 21:case"end":return p.stop()}}),null,this)}}]),e}(),z=a(101),G=Object(z.a)(),K=function(){if(console.debug(G),"demo"===G){console.log("API Wrapper demo time!");var e=new V;return Object.freeze(e),e}if("browser"===G){var t=new B;return Object.freeze(t),t}if("electron"===G){var a=new(0,window.ElectronWrapper);return Object.freeze(a),a}}(),X=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(N.a)(this,Object(D.a)(t).call(this,e))).handleTitleChange=function(e){a.setState({title:e.target.value})},a.handleDescriptionChange=function(e){a.setState({description:e.target.value})},a.handleFileUpload=function(e){var t=Array.from(e.target.files)[0],r=new FormData;r.append("file",t),r.append("type",t.type),t.path&&r.append("path",t.path),a.setState({mediaFileSelected:!0,formData:r}),""===a.state.title&&a.setState({title:t.name})},a.sendRequest=function(){a.setState({uploading:!0});var e=a.state.formData;e.append("title",a.state.title),e.append("description",a.state.description),console.log("formData.get('path')",e.get("path"));var t={};"electron"===Object(z.a)()&&(t={title:e.get("title"),description:e.get("description"),path:e.get("path")});try{K.createTranscript(a.state.projectId,a.state.formData,t).then((function(e){console.log("ApiWrapper.createTranscript-response ",e),a.setState({uploading:!1,uploadCompleted:!0,redirect:!0,newTranscriptId:e.transcriptId}),a.props.handleSaveForm(e.transcript)})).catch((function(e){console.log("error:::: ",e),a.setState({uploading:!1,redirect:!1,savedNotification:n.a.createElement(l.a,{dismissable:!0,variant:"danger",heading:"Error could not contact the server",message:n.a.createElement("p",null,"There was an error trying to create this transcript on the server")})})}))}catch(r){console.error("error submitting:::",r)}},a.state={projectId:a.props.projectId,validated:!1,redirect:!1,newTranscriptId:null,uploading:!1,uploadCompleted:!1,mediaFileSelected:!1,title:a.props.title,description:a.props.description,id:a.props.id,formData:null,savedNotification:null},a}return Object(U.a)(t,e),Object(A.a)(t,[{key:"handleSubmit",value:function(e){var t=e.currentTarget;console.log("(form.checkValidity()",t.checkValidity()),t.checkValidity()||(e.preventDefault(),e.stopPropagation(),this.setState({validated:!0})),t.checkValidity()&&(e.preventDefault(),e.stopPropagation(),this.sendRequest())}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,this.state.savedNotification,n.a.createElement(M.a,{noValidate:!0,validated:this.state.validated,onSubmit:function(t){return e.handleSubmit(t)}},n.a.createElement(M.a.Group,{controlId:"formTranscriptTitle"},n.a.createElement(M.a.Label,null,"Title "),n.a.createElement(M.a.Control,{required:!0,type:"text",placeholder:"Enter a transcript title",value:this.state.title,onChange:this.handleTitleChange}),n.a.createElement(M.a.Text,{className:"text-muted"},"Chose a title for your Transcript !!!!!"),n.a.createElement(M.a.Control.Feedback,null,"Looks good!"),n.a.createElement(M.a.Control.Feedback,{type:"invalid"},"Please chose a title for your transcript")),n.a.createElement(M.a.Group,{controlId:"formTranscriptDescription"},n.a.createElement(M.a.Label,null,"Description "),n.a.createElement(M.a.Control,{type:"text",placeholder:"Enter a Transcript description",value:this.state.description,onChange:this.handleDescriptionChange}),n.a.createElement(M.a.Text,{className:"text-muted"},"Chose an optional description for your Transcript"),n.a.createElement(M.a.Control.Feedback,null,"Looks good!"),n.a.createElement(M.a.Control.Feedback,{type:"invalid"},"Please chose a description for your transcript")),n.a.createElement(M.a.Group,{controlId:"formTranscriptMediaFile"},n.a.createElement(M.a.Control,{required:!0,type:"file",label:"Upload",accept:"audio/*,video/*",onChange:this.handleFileUpload}),n.a.createElement(M.a.Text,{className:"text-muted"},"Select an audio or video file to upload"),n.a.createElement(M.a.Control.Feedback,null,"Looks good!"),n.a.createElement(M.a.Control.Feedback,{type:"invalid"},"Please chose a audio or video file to upload")),n.a.createElement(F.a.Footer,null,n.a.createElement(x.a,{variant:"primary",type:"submit"},"Save"))))}}]),t}(r.Component),Y=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(N.a)(this,Object(D.a)(t).call(this,e))).handleClose=function(){a.props.handleCloseModal()},a.state={title:"title"},a}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return n.a.createElement(F.a,{show:this.props.show,onHide:this.handleClose},n.a.createElement(F.a.Header,{closeButton:!0},n.a.createElement(F.a.Title,null,this.props.modalTitle)),n.a.createElement(F.a.Body,null,n.a.createElement(X,{projectId:this.props.projectId,title:this.props.title,description:this.props.description,id:this.props.id,handleSaveForm:this.props.handleSaveForm,handleCloseModal:this.props.handleCloseModal,type:"transcript"})))}}]),t}(n.a.Component),$={title:"",description:"",id:null},Q=function(e){var t,a,s=e.type,o=Object(r.useState)([]),c=Object(m.a)(o,2),i=c[0],l=c[1],p=Object(r.useState)(!1),u=Object(m.a)(p,2),d=u[0],h=u[1],b=Object(r.useState)($),v=Object(m.a)(b,2),w=v[0],E=v[1],S=function(t){e.handleSave(t),h(!1),E($)},y=function(){console.log("toggle",!d),h(!d),d||E($)};Object(r.useEffect)((function(){return j(e.items,i)||l(e.items),function(){}}),[i,e.items]),i.length>0?(t=n.a.createElement(O.a,{handleSearch:function(e){var t=i.map((function(t){return function(e,t){var a,r;return a=[e.title,e.description],r=t,a.find((function(e){return function(e,t){return e.toLowerCase().trim().includes(t.toLowerCase().trim())}(e,r)}))?e.display=!0:e.display=!1,e}(t,e)}));l(t)}}),a=n.a.createElement(T.a,{type:e.type,items:i,handleEditItem:function(e){var t=i.find((function(t){return t.id===e}));E(t),h(!0)},handleDeleteItem:function(t){e.handleDelete(t)}})):a=n.a.createElement("i",null,"There are no ",s,"s, create a new one to get started.");var k=n.a.createElement(I.a,Object.assign({},w,{modalTitle:w.id?"Edit ".concat(s):"New ".concat(s),showModal:d,handleOnHide:y,handleSaveForm:S,itemType:s.toLowerCase}));return"transcript"===e.type&&null===w.id&&(k=n.a.createElement(Y,{modalTitle:"New ".concat(s),handleCloseModal:y,show:d,handleSaveForm:S,itemType:s.toLowerCase})),n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,null,n.a.createElement(g.a,{sm:9},t," "),n.a.createElement(g.a,{xs:12,sm:3},n.a.createElement(x.a,{onClick:y,variant:"outline-secondary",size:"sm",block:!0},"New ",s," "))),a,k," ")};Q.defaultProps={type:"Project"};var Z=Q,ee=a(26),te=a(71),ae=function(e,t,a){var r=a,n=a.findIndex((function(t){return t.id===e}));return Object.assign(r[n],t),r},re=function(e,t){return t.filter((function(t){return t.id!==e}))},ne=function(e,t){return[].concat(Object(te.a)(t),[e])},se=function(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),a=t[0],s=t[1],o=Object(r.useState)([]),i=Object(m.a)(o,2),l=i[0],u=i[1],d="Project",b=Object(r.useContext)(c),w=function(e){var t,a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(b.createProject(e));case 2:"ok"===(t=n.sent).status?((a=t.project).display=!0,r=ne(a,l),u(r)):console.error("Failed to add project",e);case 4:case"end":return n.stop()}}))},E=function(e,t){var a,r,n;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.awrap(b.updateProject(e,t));case 2:"ok"===(a=s.sent).status&&((r=a.project).display=!0,n=ae(e,r,l),u(n));case 4:case"end":return s.stop()}}))};Object(r.useEffect)((function(){return a||(!function(){var e,t;h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=[],a.prev=1,a.next=4,h.a.awrap(b.getAllProjects());case 4:t=a.sent,e=t.map((function(e){var t=e.id;return e.key=t,e.url="/projects/".concat(t),e.display=!0,e})),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log("Failed to get projects");case 11:u(e);case 12:case"end":return a.stop()}}),null,null,[[1,8]])}(),s(!0)),function(){}}),[b,a,l]);var S=[{name:"".concat(d,"s"),link:"/".concat(d,"s")}];return n.a.createElement(n.a.Fragment,null,n.a.createElement(p.a,{"data-testid":"projectsContainer",style:{marginBottom:"5em",marginTop:"1em"}},n.a.createElement(f.a,null,n.a.createElement(g.a,{sm:12},n.a.createElement(v.a,{"data-testid":"projectsBreadcrumb",items:S}))),n.a.createElement(Z,{key:d,model:d,items:l,handleSave:function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=6;break}return t.next=3,h.a.awrap(E(e.id,e));case 3:return t.abrupt("return",t.sent);case 6:return t.next=8,h.a.awrap(w(e));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}))},handleDelete:function(e){if(console.log("handle delete"),"ok"===function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(b.deleteProject(e));case 3:t=a.sent,a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0);case 9:return console.log("api.deleteProject",t),a.abrupt("return",t);case 11:case"end":return a.stop()}}),null,null,[[0,6]])}(e).status){var t=re(e,l);u(t)}}})),n.a.createElement(y,null))},oe=a(214),ce=a(64),ie=function(e){var t=Object(r.useContext)(c),a=Object(r.useState)(!1),s=Object(m.a)(a,2),o=s[0],i=s[1],l=Object(r.useState)([]),p=Object(m.a)(l,2),u=p[0],d=p[1],f=Object(r.useState)(!1),g=Object(m.a)(f,2),b=g[0],v=g[1],w=Object(r.useState)(),E=Object(m.a)(w,2),S=E[0],y=E[1];Object(r.useEffect)((function(){var a,r=function(){var a,r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(t.getTranscripts(e.projectId));case 2:a=n.sent,r=a.transcripts.map((function(t){var a;return t.display=!0,t.url=(a=t.id,"#/projects/".concat(e.projectId,"/transcripts/").concat(a,"/correct")),t.projectId=e.projectId,t})),d(r);case 5:case"end":return n.stop()}}))};return o||(r(),i(!0)),b&&!S&&y(setTimeout((function(){r()}),3e4)),u.length>0&&v(0!==(a=u).length&&!!a.find((function(e){return"in-progress"===e.status}))),function(){clearInterval(S)}}),[t,S,o,b,u,e.projectId]);var x=function(a){return a.id?function(a,r){var n,s,o,c,i;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return!1,l.next=3,h.a.awrap(t.updateTranscript(e.projectId,a,!1,r));case 3:"ok"===(n=l.sent).status?(console.log(" response",n),s=n.transcript,o=u.findIndex((function(e){return e.id===a})),c=u[o],s.display=!0,s.status=c.status,i=ae(a,s,u),d(i)):console.log("api.updateTranscript",n);case 5:case"end":return l.stop()}}))}(a.id,a):function(e){var a,r,n;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.awrap(t.createTranscript(e));case 2:"ok"===(a=s.sent).status?((r=a.transcript).display=!0,r.status="in-progress",n=ne(r,u),d(n)):console.log("api.updateTranscript",a);case 4:case"end":return s.stop()}}))}(a)},j=function(a){if("ok"===function(a){var r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t),n.prev=1,n.next=4,h.a.awrap(t.deleteTranscript(e.projectId,a));case 4:r=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.log(n.t0);case 10:return console.log("api.deleteTranscript",r),n.abrupt("return",r);case 12:case"end":return n.stop()}}),null,null,[[1,7]])}(a).status){var r=re(a,u);d(r)}};return n.a.createElement(c.Consumer,null,(function(){return n.a.createElement(Z,{type:"transcript",items:u,handleSave:x,handleDelete:j})}))},le=function(e){var t=Object(r.useContext)(c),a=Object(r.useState)([]),s=Object(m.a)(a,2),o=s[0],i=s[1],l=Object(r.useState)(!1),p=Object(m.a)(l,2),u=p[0],d=p[1];Object(r.useEffect)((function(){return u||(!function(){var a,r;h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(t.getAllPaperEdits(e.projectId));case 2:a=n.sent,r=a.map((function(t){var a;return t.display=!0,t.url=(a=t.id,"/projects/".concat(e.projectId,"/paperedits/").concat(a)),t.projectId=e.projectId,t})),i(r);case 5:case"end":return n.stop()}}))}(),d(!0)),function(){}}),[t,u,o,e.projectId]);var f=function(a){return a.id?function(a,r){var n,s,c;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,h.a.awrap(t.updatePaperEdit(e.projectId,a,r));case 2:n=l.sent,s=n.paperedit,"ok"===n.status&&s?(s.display=!0,c=ae(a,s,o),i(c)):console.log("api.createPaperEdit",n);case 5:case"end":return l.stop()}}))}(a.id,a):function(a){var r,n,s;return h.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,h.a.awrap(t.createPaperEdit(e.projectId,a));case 2:"ok"===(r=c.sent).status?((n=r.paperedit).display=!0,s=ne(n,o),i(s)):console.log("api.createPaperEdit",r);case 4:case"end":return c.stop()}}))}(a)},g=function(a){if(console.log("handle delete"),"ok"===function(a){var r;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(t.deletePaperEdit(e.projectId,a));case 3:r=n.sent,n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0);case 9:return console.log("api.deletePaperEdit",r),n.abrupt("return",r);case 11:case"end":return n.stop()}}),null,null,[[0,6]])}(a).status){var r=re(a,o);i(r)}};return n.a.createElement(c.Consumer,null,(function(){return n.a.createElement(Z,{type:"Paper Edit",items:o,handleSave:f,handleDelete:g})}))},pe=function(e){return[{name:"Projects",link:"/projects"},{name:e}]},ue=function(e){var t=Object(r.useContext)(c),a=e.match.params.projectId,s=Object(r.useState)("transcripts"),o=Object(m.a)(s,2),i=o[0],l=o[1],u=Object(r.useState)("Project Name"),d=Object(m.a)(u,2),b=d[0],w=d[1];return Object(r.useEffect)((function(){return function(){var e;h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.a.awrap(t.getProject(a));case 3:e=r.sent,w(e.project.title),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.error("Could not get Project Id: ",a,r.t0);case 10:case"end":return r.stop()}}),null,null,[[0,7]])}(),function(){}}),[t,a,b]),n.a.createElement(c.Consumer,null,(function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(p.a,{style:{marginBottom:"5em",marginTop:"1em"}},n.a.createElement(f.a,null,n.a.createElement(g.a,{sm:12},n.a.createElement(v.a,{items:pe(b)}))),n.a.createElement(oe.a,{id:"controlled-tab-example",activeKey:i,onSelect:function(e){return l(e)}},n.a.createElement(ce.a,{eventKey:"transcripts",title:"Transcripts"},n.a.createElement(p.a,{style:{marginBottom:"5em",marginTop:"1em"}},n.a.createElement(ie,{projectId:a}))),n.a.createElement(ce.a,{eventKey:"paperedits",title:"Paper Edits"},n.a.createElement(p.a,{style:{marginBottom:"5em",marginTop:"1em"}},n.a.createElement(le,{projectId:a}))))),n.a.createElement(y,null))}))},de=a(197),he=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(N.a)(this,Object(D.a)(t).call(this,e))).componentDidMount=function(){a.context.getTranscript(a.state.projectId,a.state.transcriptId).then((function(e){a.setState({projectTitle:e.projectTitle,transcriptTitle:e.transcriptTitle,transcriptJson:e.transcript,mediaUrl:e.url,mediaType:e.mediaType})}))},a.saveToServer=function(){var e=a.context;alert("save to server");var t=a.transcriptEditorRef.current.getEditorContent("digitalpaperedit").data;t.title=a.state.transcriptTitle,t.transcriptTitle=a.state.transcriptTitle;e.updateTranscript(a.state.projectId,a.state.transcriptId,!1,t).then((function(e){"ok"===e.status&&a.setState({savedNotification:n.a.createElement(l.a,{dismissable:!0,variant:"success",heading:"Transcript saved",message:n.a.createElement("p",null,"Transcript: ",n.a.createElement("b",null,a.state.transcriptTitle)," has been saved")})})})).catch((function(e){console.error("error saving transcript:: ",e),a.setState({savedNotification:n.a.createElement(l.a,{dismissable:!0,variant:"danger",heading:"Error saving transcript",message:n.a.createElement("p",null,"There was an error trying to save this transcript: ",n.a.createElement("b",null,a.state.transcriptTitle))})})}))},a.state={projectId:a.props.match.params.projectId,transcriptId:a.props.match.params.transcriptId,transcriptJson:null,mediaUrl:null,projectTitle:"",transcriptTitle:"",savedNotification:null,mediaType:"video"},a.transcriptEditorRef=n.a.createRef(),a}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(p.a,{style:{marginBottom:"5em"},fluid:!0},n.a.createElement("br",null),n.a.createElement(f.a,null,n.a.createElement(g.a,{sm:12,md:11,ld:11,xl:11},n.a.createElement(v.a,{items:[{name:"Projects",link:"/projects"},{name:"Project: ".concat(this.state.projectTitle),link:"/projects/".concat(this.state.projectId)},{name:"Transcripts"},{name:"".concat(this.state.transcriptTitle)},{name:"Correct"}]})),n.a.createElement(g.a,{xs:12,sm:1,md:1,ld:1,xl:1},n.a.createElement(x.a,{variant:"outline-secondary",onClick:this.saveToServer,size:"lg",block:!0},"Save"),n.a.createElement("br",null))),this.state.savedNotification,this.state.transcriptJson&&n.a.createElement(de.TranscriptEditor,{transcriptData:this.state.transcriptJson,mediaUrl:this.state.mediaUrl,isEditable:!0,sttJsonType:"digitalpaperedit",title:this.state.transcriptTitle,ref:this.transcriptEditorRef,mediaType:this.state.mediaType})))}}]),t}(r.Component);he.contextType=c;var me=he,fe=a(70),ge=a(69),be=a(29),ve=a(14),we=a(114),Ee=a(49),Se=a(102),ye=a(146),xe={control:function(e){return Object(ee.a)({},e,{backgroundColor:"white"})},option:function(e,t){var a=t.data,r=t.isDisabled,n=(t.isFocused,t.isSelected,a.color);return Object(ee.a)({},e,{backgroundColor:null,borderLeft:"1.5em solid",borderColor:n,marginBottom:"0.4em",cursor:r?"not-allowed":"default"})},multiValue:function(e,t){var a=t.data;return Object(ee.a)({},e,{backgroundColor:"white",border:"0.05em solid",borderLeft:"1.2em solid",borderColor:a.color})},multiValueLabel:function(e,t){t.data;return Object(ee.a)({},e)},multiValueRemove:function(e,t){t.data;return Object(ee.a)({},e)}},je={control:function(e){return Object(ee.a)({},e,{backgroundColor:"white"})},option:function(e){return Object(ee.a)({},e,{backgroundColor:null,cursor:"default"})},multiValue:function(e){return Object(ee.a)({},e,{backgroundColor:"white",border:"0.05em solid grey"})},multiValueLabel:function(e){return Object(ee.a)({},e)},multiValueRemove:function(e){return Object(ee.a)({},e)}},ke=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(N.a)(this,Object(D.a)(t).call(this,e))).handleToggleSearchTextPreferences=function(){a.setState((function(e){return{showTextSearchPreferences:!e.showTextSearchPreferences}}))},a.handleToggleSearchLabelsPreferences=function(){a.setState((function(e){return{showLabelsSearchPreferences:!e.showLabelsSearchPreferences}}))},a.handleToggleSearchSpeakersPreferences=function(){a.setState((function(e){return{showSpeakersSearchPreferences:!e.showSpeakersSearchPreferences}}))},a.handleSpeakersSearchChange=function(e){a.props.handleSpeakersSearchChange(e),a.setState({selectedOptionSpeakerSearch:e})},a.handleLabelsSearchChange=function(e){a.props.handleLabelsSearchChange(e),a.setState({selectedOptionLabelSearch:e})},a.handleShowParagraphsMatchingSearch=function(){a.setState((function(e){return{showParagraphsMatchingSearch:!e.showParagraphsMatchingSearch}}),(function(){a.props.handleShowParagraphsMatchingSearch()}))},a.handleToggleAll=function(){a.setState((function(e){return{showTextSearchPreferences:!0,showSpeakersSearchPreferences:!0,showLabelsSearchPreferences:!0,showParagraphsMatchingSearch:!0}}),(function(){a.props.handleShowParagraphsMatchingSearch()}))},a.handleHideAll=function(){a.setState((function(e){return{showTextSearchPreferences:!1,showSpeakersSearchPreferences:!1,showLabelsSearchPreferences:!1,showParagraphsMatchingSearch:!1}}),(function(){a.props.handleShowParagraphsMatchingSearch()}))},a.state={showParagraphsMatchingSearch:!1,showTextSearchPreferences:!1,showSpeakersSearchPreferences:!1,showLabelsSearchPreferences:!1},a}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(be.a.Header,null,n.a.createElement(Ee.a,{className:"mb-3"},n.a.createElement(Ee.a.Prepend,null,n.a.createElement(Ee.a.Text,null,n.a.createElement(E.a,{icon:S.q}))),n.a.createElement(Se.a,{onChange:function(t){e.props.handleSearch(t,{showParagraphsMatchingSearch:e.state.showParagraphsMatchingSearch,showLabelsSearchPreferences:e.state.showLabelsSearchPreferences,showSpeakersSearchPreferences:e.state.showSpeakersSearchPreferences})},placeholder:"Search text...","aria-label":"search","aria-describedby":"search"}),n.a.createElement(we.a,{drop:"right",as:Ee.a.Append,variant:"outline-secondary",title:n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,{icon:S.h,title:"Filter results"}))},n.a.createElement(ve.a.Item,{onClick:this.handleToggleSearchLabelsPreferences,title:"Filter results by Labels"},n.a.createElement(E.a,{icon:S.u}),"  Labels ",this.state.showLabelsSearchPreferences?n.a.createElement(E.a,{style:{color:"blue"},icon:S.d}):""),n.a.createElement(ve.a.Item,{onClick:this.handleToggleSearchSpeakersPreferences,title:"Filter results by Speakers"},n.a.createElement(E.a,{icon:S.y})," Speakers  ",this.state.showSpeakersSearchPreferences?n.a.createElement(E.a,{style:{color:"blue"},icon:S.d}):""),n.a.createElement(ve.a.Item,{onClick:this.handleToggleSearchTextPreferences,title:"Show only matching paragraphs"},n.a.createElement(E.a,{icon:S.a})," Paragraphs only ",this.state.showTextSearchPreferences?n.a.createElement(E.a,{style:{color:"blue"},icon:S.d}):""),n.a.createElement(ve.a.Item,{onClick:this.handleToggleAll,title:"Show all of the above options"},"All ",this.state.showLabelsSearchPreferences&&this.state.showSpeakersSearchPreferences&&this.state.showTextSearchPreferences?n.a.createElement(E.a,{style:{color:"blue"},icon:S.d}):""),n.a.createElement(ve.a.Divider,null),n.a.createElement(ve.a.Item,{onClick:this.handleHideAll,title:"Deselect all the options"},"Deselect all"))),this.state.showLabelsSearchPreferences?n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{className:"mb-3"},n.a.createElement(g.a,{xs:1,sm:1,md:1,ld:1,xl:1},n.a.createElement(Ee.a.Prepend,null,n.a.createElement(Ee.a.Text,null,n.a.createElement(E.a,{icon:S.u})))),n.a.createElement(g.a,{xs:10,sm:11,md:11,ld:11,xl:11},n.a.createElement(ye.a,{value:this.state.selectedOptionLabelSearch,onChange:this.handleLabelsSearchChange,isMulti:!0,isSearchable:!0,options:this.props.labelsOptions,styles:xe,placeholder:"Filter by label..."})))):"",this.state.showSpeakersSearchPreferences?n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{className:"mb-3"},n.a.createElement(g.a,{xs:1,sm:1,md:1,ld:1,xl:1},n.a.createElement(Ee.a.Prepend,null,n.a.createElement(Ee.a.Text,null,n.a.createElement(E.a,{icon:S.y})))),n.a.createElement(g.a,{xs:10,sm:11,md:11,ld:11,xl:11},n.a.createElement(ye.a,{value:this.state.selectedOptionSpeakerSearch,onChange:this.handleSpeakersSearchChange,isMulti:!0,isSearchable:!0,options:this.props.speakersOptions,styles:je,placeholder:"Filter by speaker..."})))):"",this.state.showTextSearchPreferences?n.a.createElement(n.a.Fragment,null,n.a.createElement(M.a.Check,{type:"checkbox",checked:this.state.showParagraphsMatchingSearch,onChange:this.handleShowParagraphsMatchingSearch,label:n.a.createElement(n.a.Fragment,null,n.a.createElement(M.a.Text,{className:"text-muted",title:"Show only matching paragraphs",onClick:this.handleShowParagraphsMatchingSearch},"Show only matching paragraphs"))})):""))}}]),t}(r.Component);var Te=function(e,t){return function(e,t){var a=[],r=0,n=0,s={words:[],text:"",speaker:""};return e.forEach((function(e){var o=function(e,t){return t.find((function(t){if(e.start>=t.start&&e.end<=t.end)return t}))}(e,t);void 0!==o&&((r=t.indexOf(o))===n?(s.words.push(e),s.text+=e.text+" ",s.speaker=o.speaker):(n=r,s.text.trim(),a.push(s),(s={words:[],text:"",speaker:""}).words.push(e),s.text+=e.text+" ",s.speaker=o.speaker))})),a.push(s),a}(e,t)},Pe=function(e,t){var a=t[0].start,r=t[t.length-1].end,n=function(e,t,a){return e.find((function(e){return e.start>=t&&e.end<=a}))}(e,a,r);if(n)return n;var s=function(e,t,a){return e.find((function(e){return e.start>=t&&e.start<=a}))}(e,a,r);if(s)return s;var o=function(e,t,a){return e.find((function(e){return e.end>=t&&e.end<=a}))}(e,a,r);if(o)return o;var c=function(e,t,a){return e.find((function(e){return e.start<=t&&e.end>=a}))}(e,a,r);return c||!1},Oe=a(202),Ce=a(145),Ie=a.n(Ce),Le=function(e){function t(){return Object(L.a)(this,t),Object(N.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.paragraphDisplayPreference;e.borderStyle="dashed",e.borderWidth="0.01em",e.borderColor="lightgray",e.padding="0.5em";var t={};return this.props.showParagraphsMatchingSearch?t=this.props.paragraphDisplayPreference:e.display||(delete e.display,t.borderRight="0.1em dashed lightgrey",t.borderLeft="0.1em dashed lightgrey"),n.a.createElement(f.a,{style:Object(ee.a)({},t),className:"paragraph","data-paragraph-text":this.props.paragraphTextWithoutPunctuation},n.a.createElement(g.a,{xs:12,sm:12,md:3,lg:3,xl:2,style:{cursor:"pointer",width:"100%"},className:"text-truncate",title:"".concat(this.props.speakerName.toUpperCase()," -  ").concat(Object(Oe.shortTimecode)(this.props.paragraph[0].start))},n.a.createElement("span",{className:[Ie.a.speaker,Ie.a.unselectable,"timecode"].join(" "),"data-start":this.props.paragraph[0].start,tabIndex:"0"},this.props.speakerName)),n.a.createElement(g.a,{xs:12,sm:12,md:9,lg:9,xl:10},this.props.wordsElements))}}]),t}(r.Component),Ae=function(e){return e.replace(/\.|\?|!|,|;/,"").toLowerCase()},Ne=function(e){function t(){var e,a;Object(L.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(N.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(n)))).generatePreviousTimes=function(e){for(var t="",a=0;a<e;a++)t+="".concat(a," ");if(e%1>0){var r=Math.floor(e%1*4)/4;t+=" ".concat(Math.floor(e)+r)}return t},a}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.transcriptId,a=e.speaker,r=e.word;return n.a.createElement("span",{title:"start:".concat(r.start," - end:").concat(r.end),"data-prev-times":this.generatePreviousTimes(r.start),className:["words"].join(" "),"data-start":r.start,"data-text":Ae(r.text),"data-end":r.end,"data-transcript-id":t,"data-speaker":a,key:"key_"+r.id+"_"+r.end,role:"button","aria-pressed":"false",onKeyDown:this.props.handleKeyDownWords},r.text," ")}}]),t}(r.Component),De=a(213),Ue=a(212),Fe=function(e){function t(){var e,a;Object(L.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(N.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(n)))).handleEditAnnotation=function(){a.props.handleEditAnnotation(a.props.annotationId,void 0)},a}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e,t=this;if(this.props.labelsOptions){var a=this.props.labelsOptions.find((function(e){return e.id===t.props.annotationLabelId}));a||(a=this.props.labelsOptions[0]),e=n.a.createElement(Ue.a,{rootClose:!0,trigger:"click",placement:"bottom",overlay:n.a.createElement(De.a,{id:"popover-basic"},n.a.createElement(f.a,null,n.a.createElement(g.a,{md:1,style:{backgroundColor:a.color,marginLeft:"1em"}}),n.a.createElement(g.a,null,n.a.createElement(E.a,{icon:S.u}),"  ",a.label),n.a.createElement(g.a,{md:1,style:{marginRight:"1em"},onClick:function(){t.props.handleDeleteAnnotation(t.props.annotationId)}},n.a.createElement(E.a,{icon:S.x}))),n.a.createElement("hr",null),n.a.createElement(E.a,{icon:S.s,onClick:this.handleEditAnnotation}),"   ",this.props.annotationNote,n.a.createElement("br",null),n.a.createElement(E.a,{icon:S.n,onClick:this.handleEditAnnotation}))},n.a.createElement("span",{style:{borderBottom:"0.1em ".concat(a.color," solid")},className:"highlight"},this.props.words))}return n.a.createElement(n.a.Fragment,null,e)}}]),t}(r.Component);var Me=function(e,t,a){var r={};return e||(r={display:"none"}),t||(r={display:"none"}),a||(r={display:"none"}),r},Re=function(e,t){return e.map((function(e){return e.words=function(e,t){return e.map((function(e){var a=function(e,t,a){return e.find((function(e){return t>=e.start&&a<=e.end}))}(t,e.start,e.end);return a?e.annotation=a:delete e.annotation,e}))}(e.words,t),e}))},Je=function(e){function t(){var e,a;Object(L.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(N.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(n)))).handleKeyDownTimecodes=function(e){"Enter"===e.key&&a.props.handleTimecodeClick(e)},a.handleKeyDownWords=function(e){"Enter"===e.key&&a.props.handleWordClick(e)},a}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e,t=this,a={},r=Te(this.props.transcriptJson.words,this.props.transcriptJson.paragraphs),s=Re(r,this.props.annotations).map((function(r,s){var o=Pe(t.props.annotations,r.words),c=r.text.replace(/\.|\?|!|,|;/,"").toLowerCase(),i=c.includes(t.props.searchString.toLowerCase()),l=!1;0!==t.props.selectedOptionSpeakerSearch.length?t.props.selectedOptionSpeakerSearch.find((function(e){return e.label===r.speaker}))&&(l=!0):l=!0;var p=!1;return 0!==t.props.selectedOptionLabelSearch.length?t.props.selectedOptionLabelSearch.find((function(e){return e.id===o.labelId}))&&(p=!0):p=!0,a=Me(i,l,p),e=r.words.map((function(e,a){var s=n.a.createElement(Ne,{transcriptId:t.props.transcriptId,speaker:r.speaker,key:"key--"+a,word:e,handleKeyDownWords:function(e){return"Enter"===e.key?t.props.handleWordClick(e):null}});return e.annotation?n.a.createElement(Fe,{key:"key----"+a,words:s,labelsOptions:t.props.labelsOptions,annotationLabelId:e.annotation.labelId,annotationId:e.annotation.id,annotationNote:e.annotation.note,handleDeleteAnnotation:t.props.handleDeleteAnnotation,handleEditAnnotation:t.props.handleEditAnnotation}):s})),n.a.createElement(Le,{showParagraphsMatchingSearch:t.props.showParagraphsMatchingSearch,paragraphDisplayPreference:a,key:"key------"+s,paragraphTextWithoutPunctuation:c,speakerName:r.speaker,paragraph:r.words,handleKeyDownTimecodes:function(e){return"Enter"===e.key?t.props.handleTimecodeClick(e):null},wordsElements:e})}));return n.a.createElement(n.a.Fragment,null,s)}}]),t}(r.Component),We=a(147),_e=a(203),qe={yellow:"#ffff00",greenyellow:"#adff2f",deepskyblue:"#00bfff",deeppink:"#ff1493",aqua:"#00ffff",black:"#000000",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chocolate:"#d2691e",coral:"#ff7f50",crimson:"#dc143c",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",blue:"#0000ff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",chartreuse:"#7fff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",yellowgreen:"#9acd32",aquamarine:"#7fffd4",mediumaquamarine:"#66cdaa"},He=Object.freeze(Object.keys(qe).splice(0,15)),Be=[];for(var Ve in qe)Be.push({value:Ve,label:Ve,color:qe[Ve]});var ze=-1,Ge=He.length,Ke=function(){return ze<Ge?ze+=1:ze=0,He[ze]},Xe=a(82),Ye=a.n(Xe),$e=function(e){function t(e,a){var r;return Object(L.a)(this,t),(r=Object(N.a)(this,Object(D.a)(t).call(this,e,a))).handleRandomiseColor=function(){r.setState({color:Ke()})},r.handleColorPickerChangeComplete=function(e){r.setState({color:Ye()(e.hex).name()})},r.handleManualColorChange=function(e){if(e&&e.target&&e.target.value){var t=e.target.value;r.setState({color:Ye.a.valid(t)?Ye()(t).name():t})}else e&&e.target&&""===e.target.value&&r.setState({color:""})},r.handleColorSelectChange=function(e){r.setState({color:e.color})},r.handleSave=function(){Ye.a.valid(r.state.color)?""!==r.state.label?(r.props.onLabelSaved({value:r.state.color,label:r.state.label,color:r.state.color,description:r.state.description,id:r.state.labelId}),r.props.handleClose()):alert("add a name to the label to be able to save"):alert("choose a valid color")},r.state={color:r.props.color,label:r.props.label,description:r.props.description,labelId:r.props.labelId},r}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(M.a,null,n.a.createElement(M.a.Group,{controlId:"formGroupEmail"},n.a.createElement(M.a.Label,null,"Label Name "),n.a.createElement(M.a.Control,{type:"text",placeholder:"Enter label name",defaultValue:this.state.label,onInput:function(t){e.setState({label:t.target.value})}}),n.a.createElement(M.a.Text,{className:"text-muted"},"Required label name")),n.a.createElement(M.a.Group,{controlId:"formGroupPassword"},n.a.createElement(M.a.Label,null,"Label Description"),n.a.createElement(M.a.Control,{type:"text",placeholder:"Enter label description",defaultValue:this.state.description,as:"textarea",rows:"3",onInput:function(t){e.setState({description:t.target.value})}}),n.a.createElement(M.a.Text,{className:"text-muted"},"Optional label description")),n.a.createElement(M.a.Group,{controlId:"formGroupPassword"},n.a.createElement(M.a.Label,null,"Color"),n.a.createElement(f.a,null,n.a.createElement(g.a,{xs:2,sm:1,md:1,lg:1,xl:1},n.a.createElement(x.a,{onClick:this.handleRandomiseColor,variant:"light",size:"sm"},n.a.createElement(E.a,{icon:S.t}))),n.a.createElement(g.a,{xs:6,sm:6,md:6,lg:6,xl:6},n.a.createElement(M.a.Control,{value:this.state.color,type:"text",placeholder:"#",onChange:this.handleManualColorChange})),n.a.createElement(g.a,{xs:2,sm:2,md:2,lg:2,xl:2,style:{backgroundColor:this.state.color,border:"solid",borderWidth:"0.01em",borderColor:"grey",padding:"0"}})),n.a.createElement(f.a,null,n.a.createElement(g.a,{xs:12,sm:12,md:12,lg:12,xl:12},n.a.createElement(M.a.Text,{className:"text-muted"},"To pick a color you can chose one at random, pick one form the list below, or type the name or hex code above."),n.a.createElement(_e.GithubPicker,{width:"100%",color:this.state.color,triangle:"hide",onChangeComplete:this.handleColorPickerChangeComplete,colors:He})))),n.a.createElement(x.a,{variant:"primary",onClick:this.handleSave},"Save")))}}]),t}(r.Component),Qe=function(e){function t(e,a){var r;return Object(L.a)(this,t),(r=Object(N.a)(this,Object(D.a)(t).call(this,e,a))).handleClose=function(){r.setState({show:!1})},r.handleShow=function(){r.setState({show:!0})},r.state={show:!1,color:r.props.color,label:r.props.label,description:r.props.description,labelId:r.props.labelId},r}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a,{variant:"link",size:"sm",onClick:this.handleShow,block:!0},this.props.openBtn),n.a.createElement(F.a,{show:this.state.show,onHide:this.handleClose},n.a.createElement(F.a.Header,{closeButton:!0},n.a.createElement(F.a.Title,null,n.a.createElement(E.a,{icon:S.u}),"  Label ")),n.a.createElement(F.a.Body,null,n.a.createElement($e,{onLabelSaved:this.props.onLabelSaved,label:this.props.label,description:this.props.description,color:this.props.color,labelId:this.props.labelId,handleClose:this.handleClose}))))}}]),t}(r.Component),Ze=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(N.a)(this,Object(D.a)(t).call(this,e))).removeLabel=function(e,t){!0===confirm("Click OK to delete the label, Cancel if you changed your mind")?a.props.onLabelDelete(e):alert("Your label was not deleted")},a.editLabel=function(e,t){var r=a.props.labelsOptions.filter((function(t){return t.id===e}));console.log("labelToEdit",r)},a.onLabelSaved=function(e){e.id?a.props.onLabelUpdate(e):a.props.onLabelCreate(e)},a.showLabelModal=function(){console.log(a.state.isLabelmodalShown),a.setState((function(e){return{isLabelmodalShown:!e.isLabelmodalShown}}))},a.state={isLabelmodalShown:!1},a}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e,t=this;this.props.labelsOptions&&(e=this.props.labelsOptions.map((function(e,a){return n.a.createElement(We.a.Item,{style:{width:"100%"},key:"label_"+a},n.a.createElement(f.a,null,n.a.createElement(g.a,{xs:1,sm:1,md:1,lg:1,xl:1,style:{backgroundColor:e.color},title:e.label}),n.a.createElement(g.a,{xs:6,sm:6,md:6,lg:6,xl:6,title:e.label},e.label),n.a.createElement(g.a,{xs:1,sm:1,md:1,lg:1,xl:1},"default"!==e.label.toLowerCase()?n.a.createElement(Qe,{color:e.color,label:e.label,description:e.description,labelId:e.id,show:t.state.isLabelmodalShown,onLabelSaved:t.onLabelSaved,openBtn:n.a.createElement("span",null," ",n.a.createElement(E.a,{icon:S.n}))}):n.a.createElement(x.a,{title:"edit label",variant:"link",size:"sm",disabled:!0},n.a.createElement(E.a,{icon:S.n})," ")),n.a.createElement(g.a,{xs:1,sm:1,md:1,lg:1,xl:1},n.a.createElement(x.a,{title:"delete label",variant:"link",size:"sm",onClick:function(a){t.removeLabel(e.id,a)},disabled:"default"===e.label.toLowerCase()},n.a.createElement(E.a,{icon:S.w})))),n.a.createElement(f.a,null,n.a.createElement(g.a,{xs:1,sm:1,md:1,lg:1,xl:1,className:"text-truncate",title:e.label}),n.a.createElement(g.a,{xs:10,sm:10,md:10,lg:10,xl:10},n.a.createElement(M.a.Text,{title:e.description},e.description))))})));var a=n.a.createElement(We.a,{style:{height:"50vh",width:"20vw",overflowY:"scroll",overflowX:"hidden"}},e);return n.a.createElement(n.a.Fragment,null,this.props.isLabelsListOpen?n.a.createElement(n.a.Fragment,null,n.a.createElement(be.a,null,n.a.createElement(be.a.Header,null,n.a.createElement(E.a,{icon:S.v})," ",n.a.createElement(E.a,{icon:S.f})," Labels"),a,n.a.createElement(be.a.Footer,{className:"text-muted"},n.a.createElement(Qe,{color:Ke(),label:"",description:"",labelId:null,show:this.state.isLabelmodalShown,onLabelSaved:this.onLabelSaved,openBtn:n.a.createElement(x.a,{variant:"outline-secondary",block:!0},n.a.createElement(E.a,{icon:S.u})," Create New Label")})))):"")}}]),t}(r.Component),et=function(e,t){var a;return function(){var r=arguments;clearTimeout(a),a=setTimeout((function(){e.apply(null,r)}),t)}};var tt=function(e){if(!window.getSelection().isCollapsed){var t=window.getSelection().getRangeAt(0).cloneContents().querySelectorAll(".words");if(0!==t.length)return{start:parseFloat(t[0].dataset.start),end:parseFloat(t[t.length-1].dataset.end)};var a=window.getSelection().anchorNode.parentElement;return"words"===a.className&&{start:parseFloat(a.dataset.start),end:parseFloat(a.dataset.end)}}return!1};function at(e){var t=[],a=new Map,r=!0,n=!1,s=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var i=o.value;a.has(i.speaker)||(a.set(i.speaker,!0),t.push({value:i.speaker,label:i.speaker}))}}catch(l){n=!0,s=l}finally{try{r||null==c.return||c.return()}finally{if(n)throw s}}return t}var rt=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(N.a)(this,Object(D.a)(t).call(this,e))).componentDidMount=function(){a.context.getAllAnnotations(a.props.projectId,a.props.transcriptId).then((function(e){a.setState({annotations:e.annotations})}))},a.onLabelCreate=function(e){a.context.createLabel(a.props.projectId,e).then((function(e){a.setState({labelsOptions:e.labels})}))},a.onLabelUpdate=function(e){var t=a.context;console.log("updatedLabel",e),t.updateLabel(a.props.projectId,e.id,e).then((function(e){a.setState({labelsOptions:e.labels})}))},a.onLabelDelete=function(e){a.context.deleteLabel(a.props.projectId,e).then((function(e){a.setState({labelsOptions:e.labels})}))},a.handleTimecodeClick=function(e){if(e.target.classList.contains("timecode")){var t=e.target;a.videoRef.current.currentTime=t.dataset.start,a.videoRef.current.play()}},a.handleWordClick=function(e){if("words"===e.target.className){var t=e.target;a.videoRef.current.currentTime=t.dataset.start,a.videoRef.current.play()}},a.handleShowParagraphsMatchingSearch=function(){a.setState((function(e){return{showParagraphsMatchingSearch:!e.showParagraphsMatchingSearch}}))},a.handleLabelsSearchChange=function(e){a.setState({selectedOptionLabelSearch:e})},a.handleSpeakersSearchChange=function(e){a.setState({selectedOptionSpeakerSearch:e})},a.handleSearch=function(e,t){if(""!==e.target.value){var r=e.target.value;a.setState({searchString:r.toLowerCase()}),et(a.highlightWords(r),500)}else""===e.target.value&&a.setState({sentenceToSearchCSS:"",searchString:""})},a.highlightWords=function(e){var t=e.toLowerCase().trim().split(" "),r='.paragraph[data-paragraph-text*="'.concat(t.join(" "),'"]'),n=t.map((function(e,a){var n="".concat(r,' > div > span.words[data-text="').concat(e.toLowerCase().trim(),'"]');return a<t.length-1&&(n+=", "),n})),s=t.map((function(e,a){var n="".concat(r,' > div  > span >span.words[data-text="').concat(e.toLowerCase().trim(),'"]');return a<t.length-1&&(n+=", "),n}));a.setState({sentenceToSearchCSS:n.join(" "),sentenceToSearchCSSInHighlights:s.join(" ")})},a.handleCreateAnnotation=function(e){var t=a.context,r=e.target,n=tt();if(n){var s=a.state.annotations;n.labelId=r.dataset.labelId,n.note="";var o=n;console.log("newAnnotation",o),t.createAnnotation(a.props.projectId,a.props.transcriptId,o).then((function(e){var t=e.annotation;console.log("newAnnotationFromServer",t);var r=JSON.parse(JSON.stringify(s));r.push(t),a.setState({annotations:r})}))}else alert("Select some text in the transcript to highlight ")},a.handleDeleteAnnotation=function(e){var t=a.context,r=a.state.annotations.filter((function(t){return t.id!==e})),n=JSON.parse(JSON.stringify(r));t.deleteAnnotation(a.props.projectId,a.props.transcriptId,e).then((function(e){a.setState({annotations:n})}))},a.handleEditAnnotation=function(e){var t=a.context,r=a.state.annotations,n=r.find((function(t){return t.id===e})),s=prompt("Edit the text note of the annotation",n.note);s?(n.note=s,t.updateAnnotation(a.state.projectId,a.props.transcriptId,e,n).then((function(t){var n=t.annotation,s=r.filter((function(t){return t.id!==e}));s.push(n),a.setState({annotations:s})}))):alert("all good nothing changed")},a.showLabelsReference=function(){},a.getCurrentWordTime=function(){var e=a.props.transcript.words,t=a.state.currentTime,r=e.find((function(e){if(t>=e.start&&t<=e.end)return e.start}));return void 0!==r?r[0]:0},a.videoRef=n.a.createRef(),a.state={searchString:"",showParagraphsMatchingSearch:!1,selectedOptionLabelSearch:!1,selectedOptionSpeakerSearch:[],sentenceToSearchCSS:"",sentenceToSearchCSSInHighlights:"",annotations:[],isLabelsListOpen:!0,labelsOptions:a.props.labelsOptions,currentTime:0},a}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e,t=this,a=this.state.currentTime,r=Math.round(4*a)/4,s=n.a.createElement("style",{scoped:!0},'span.words[data-prev-times~="'.concat(Math.floor(r),'"][data-transcript-id="').concat(this.props.transcriptId,'"] { color: ').concat("grey"," }")),o="audio"===this.props.mediaType?"100vh":"60vh";return e="audio"===this.props.mediaType?n.a.createElement(be.a.Header,null,n.a.createElement("audio",{src:this.props.url,ref:this.videoRef,onTimeUpdate:function(e){t.setState({currentTime:e.target.currentTime})},style:{width:"100%",height:"200px",backgroundColor:"black"},controls:!0})):n.a.createElement(be.a.Header,null,n.a.createElement("video",{src:this.props.url,ref:this.videoRef,onTimeUpdate:function(e){t.setState({currentTime:e.target.currentTime})},style:{marginTop:"0",width:"100%",height:"200px",backgroundColor:"black"},controls:!0})),n.a.createElement(n.a.Fragment,null,n.a.createElement("style",{scoped:!0},"".concat(this.state.sentenceToSearchCSS," { background-color: ","yellow","; text-shadow: 0 0 0.01px black }"),"".concat(this.state.sentenceToSearchCSSInHighlights," { background-color: ","yellow","; text-shadow: 0 0 0.01px black }")),n.a.createElement("h2",{className:["text-truncate","text-muted"].join(" "),title:"Transcript Title: ".concat(this.props.title)},this.props.title),n.a.createElement(be.a,null,e,n.a.createElement(be.a.Header,null,n.a.createElement(f.a,null,n.a.createElement(g.a,{xs:12},n.a.createElement(fe.a,{style:{width:"100%"}},n.a.createElement(ve.a,{as:fe.a,style:{width:"100%"}},n.a.createElement(x.a,{variant:"outline-secondary","data-label-id":"default",onClick:this.handleCreateAnnotation},n.a.createElement(E.a,{icon:S.k,flip:"horizontal"})," Highlight"),n.a.createElement(ve.a.Toggle,{split:!0,variant:"outline-secondary","data-lable-id":0}),n.a.createElement(ve.a.Menu,{onClick:this.handleCreateAnnotation},this.state.labelsOptions&&this.state.labelsOptions.map((function(e){return n.a.createElement(ve.a.Item,{key:"label_id_".concat(e.id),"data-label-id":e.id},n.a.createElement(f.a,{"data-label-id":e.id},n.a.createElement(g.a,{xs:1,style:{backgroundColor:e.color},"data-label-id":e.id}),n.a.createElement(g.a,{xs:1,"data-label-id":e.id},e.label)))})))),n.a.createElement(we.a,{drop:"right",as:fe.a,title:n.a.createElement(E.a,{icon:S.f}),id:"bg-nested-dropdown",variant:"outline-secondary"},n.a.createElement(Ze,{isLabelsListOpen:this.state.isLabelsListOpen,labelsOptions:this.state.labelsOptions&&this.state.labelsOptions,onLabelUpdate:this.onLabelUpdate,onLabelCreate:this.onLabelCreate,onLabelDelete:this.onLabelDelete})))))),n.a.createElement(ke,{labelsOptions:this.state.labelsOptions,speakersOptions:this.props.transcript?at(this.props.transcript.paragraphs):null,handleSearch:this.handleSearch,handleLabelsSearchChange:this.handleLabelsSearchChange,handleSpeakersSearchChange:this.handleSpeakersSearchChange,handleShowParagraphsMatchingSearch:this.handleShowParagraphsMatchingSearch}),n.a.createElement(be.a.Body,{onDoubleClick:this.handleWordClick,onClick:this.handleTimecodeClick,style:{height:o,overflow:"scroll"}},s,this.props.transcript&&n.a.createElement(Je,{labelsOptions:this.state.labelsOptions&&this.state.labelsOptions,annotations:this.state.annotations?this.state.annotations:[],transcriptJson:this.props.transcript,searchString:this.state.searchString?this.state.searchString:"",showParagraphsMatchingSearch:this.state.showParagraphsMatchingSearch,selectedOptionLabelSearch:this.state.selectedOptionLabelSearch?this.state.selectedOptionLabelSearch:[],selectedOptionSpeakerSearch:this.state.selectedOptionSpeakerSearch?this.state.selectedOptionSpeakerSearch:[],transcriptId:this.props.transcriptId,handleTimecodeClick:this.handleTimecodeClick,handleWordClick:this.handleWordClick,handleDeleteAnnotation:this.handleDeleteAnnotation,handleEditAnnotation:this.handleEditAnnotation}))))}}]),t}(r.Component);rt.contextType=c;var nt=rt,st=a(65),ot=a.n(st),ct=function(e){function t(){return Object(L.a)(this,t),Object(N.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.props.transcripts.map((function(e,t){return n.a.createElement(ge.a.Item,{key:ot()()},n.a.createElement(ge.a.Link,{disabled:"done"!==e.status,eventKey:e.id},"in-progress"===e.status?n.a.createElement(E.a,{icon:S.e}):"","error"===e.status?n.a.createElement(E.a,{icon:S.g}):"","  ".concat(e.transcriptTitle)))})),a=this.props.transcripts.map((function(t,a){return n.a.createElement(ce.a.Pane,{key:ot()(),eventKey:t.id},n.a.createElement(nt,{projectId:e.props.projectId,transcriptId:t.id,labelsOptions:e.props.labelsOptions,title:t.transcriptTitle,transcript:t.transcript,mediaType:t.mediaType,url:t.url}))}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(ce.a.Container,{defaultActiveKey:this.props.transcripts[0]?this.props.transcripts[0].id:"first"},n.a.createElement(f.a,null,n.a.createElement(g.a,{sm:3},n.a.createElement("h2",{className:["text-truncate","text-muted"].join(" "),title:"Transcripts"},"Transcripts"),n.a.createElement("hr",null),n.a.createElement(ge.a,{variant:"pills",className:"flex-column"},t)),n.a.createElement(g.a,{sm:9},n.a.createElement(ce.a.Content,null,a)))))}}]),t}(r.Component),it=a(204),lt=a.n(it),pt=a(205),ut=a.n(pt),dt=a(206),ht=a.n(dt),mt=a(207),ft=a.n(mt),gt=a(72),bt=a.n(gt),vt=a(118),wt=a.n(vt),Et=a(208),St=a.n(Et);function yt(e){return{start:e.dataset.start,end:e.dataset.end,text:e.innerText,speaker:e.dataset.speaker,transcriptId:e.dataset.transcriptId}}var xt=function(e){if(!window.getSelection().isCollapsed){var t=window.getSelection().getRangeAt(0).cloneContents().querySelectorAll(".words");if(0!==t.length)return{start:parseFloat(t[0].dataset.start),end:parseFloat(t[t.length-1].dataset.end),transcriptId:t[0].dataset.transcriptId,speaker:t[0].dataset.speaker,words:Array.from(t).map((function(e){return yt(e)}))};var a=window.getSelection().anchorNode.parentElement;return"words"===a.className&&{start:parseFloat(a.dataset.start),end:parseFloat(a.dataset.end),transcriptId:a.dataset.transcriptId,speaker:a.dataset.speaker,words:[yt(a)]}}return!1},jt=function(e){var t=e[0];return 0===e.filter((function(e){return e.speaker!==t.speaker})).length},kt=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(N.a)(this,Object(D.a)(t).call(this,e))).updateVideoContextWidth=function(){var e=a.card.offsetWidth-10,t=e>=350?350:e;a.setState({width:t})},a.getTranscript=function(e){return a.props.transcripts.find((function(t){return t.id===e}))},a.getPlayList=function(){var e=0;return a.state.programmeScript.elements.filter((function(e){return"paper-cut"===e.type})).map((function(t){var r=a.getTranscript(t.transcriptId),n={type:"video",start:e,sourceStart:t.start,duration:t.end-t.start,src:r.url};return e+=n.duration,n}))},a.componentDidMount=function(){a.context.getPaperEdit(a.props.projectId,a.props.papereditId).then((function(e){var t=e.programmeScript;t.elements.push({type:"insert",text:"Insert Point to add selection"}),a.setState({programmeScript:t,resetPreview:!0})})),a.updateVideoContextWidth(),window.addEventListener("resize",a.updateVideoContextWidth)},a.handleReorder=function(e){a.setState((function(t){var a=t.programmeScript;return a.elements=e,{programmeScript:a,resetPreview:!0}}))},a.handleDelete=function(e){a.setState((function(t){var a=t.programmeScript,r=e,n=a.elements;return n.splice(r,1),a.elements=n,{programmeScript:a,resetPreview:!0}}))},a.handleEdit=function(e){var t=a.state.programmeScript,r=t.elements,n=r[e],s=prompt("Edit",n.text);s&&(n.text=s,r[e]=n,t.elements=r,a.setState({programmeScript:t,resetPreview:!0}))},a.handleAddTranscriptElementToProgrammeScript=function(e){var t=a.state.programmeScript,r=a.state.programmeScript.elements;if("title"===e||"note"===e||"voice-over"===e){var n=prompt("Add some text for a section title","Some place holder text"),s=a.getIndexPositionOfInsertPoint(),o={id:ot()(),index:r.length,type:e,text:n};r.splice(s,0,o),t.elements=r,a.setState({programmeScript:t,resetPreview:!0})}},a.getIndexPositionOfInsertPoint=function(){var e=a.state.programmeScript.elements,t=e.find((function(e){return"insert"===e.type}));return e.indexOf(t)},a.handleAddTranscriptSelectionToProgrammeScript=function(){var e=xt();if(e){var t,r=a.state.programmeScript,n=r.elements,s=a.getIndexPositionOfInsertPoint();if(jt(e.words))t={id:ot()(),index:n.length,type:"paper-cut",start:e.start,end:e.end,speaker:e.speaker,words:e.words,transcriptId:e.transcriptId,labelId:[]};else(function(e){if(jt(e))return e;var t=e[0].speaker,a=[],r=[];return e.forEach((function(n,s){n.speaker===t?a.push(n):(r.push(a),(a=[]).push(n),t=n.speaker),s===e.length-1&&r.push(a)})),r})(e.words).reverse().forEach((function(e){t={id:ot()(),index:n.length,type:"paper-cut",start:e[0].start,end:e[e.length-1].end,speaker:e[0].speaker,words:e,transcriptId:e[0].transcriptId,labelId:[]}}));n.splice(s,0,t),r.elements=n,a.setState({programmeScript:r,resetPreview:!0})}else alert("Select some text in the transcript to add to the programme script"),console.log("nothing selected")},a.getSequenceJsonEDL=function(){var e,t={title:a.state.programmeScript.title,events:[]},r=a.state.programmeScript.elements.map((function(e){if("paper-cut"===e.type){var t=a.props.transcripts.find((function(t){return t.id===e.transcriptId}));return{startTime:e.start,endTime:e.end,reelName:t.metadata?t.metadata.reelName:"NA",clipName:"".concat(t.clipName),fps:t.metadata?t.metadata.fps:25,offset:t.metadata?t.metadata.timecode:"00:00:00:00",sampleRate:t.metadata?t.metadata.sampleRate:"16000"}}return null})).filter((function(e){return null!==e})).map((function(e,t){return e.id=t+1,e}));return(e=t.events).push.apply(e,Object(te.a)(r)),t},a.handleExportEDL=function(){var e=a.getSequenceJsonEDL(),t=new ut.a(e);console.log(t.compose()),bt()(t.compose(),"".concat(a.state.programmeScript.title,".edl"),"text/plain")},a.handleExportADL=function(){var e=a.getSequenceJsonEDL(),t=e.events[0],r=ht()({projectOriginator:"Digital Paper Edit",edits:e.events.map((function(e){return{start:e.startTime,end:e.endTime,clipName:e.clipName,label:""}})),sampleRate:t.sampleRate,frameRate:t.fps,projectName:e.title});bt()(r,"".concat(a.state.programmeScript.title,".adl"),"text/plain")},a.handleExportFCPX=function(){var e=a.getSequenceJsonEDL();console.log(e);var t=ft()(e);bt()(t,"".concat(a.state.programmeScript.title,".fcpxml"),"text/plain")},a.getProgrammeScriptJson=function(){var e,t={title:a.state.programmeScript.title,events:[]},r=a.state.programmeScript.elements.map((function(e){if("paper-cut"===e.type){console.log("paper-cut::",e);var t=a.props.transcripts.find((function(t){return t.id===e.transcriptId}));return Object(ee.a)({},e,{startTime:e.start,endTime:e.end,reelName:t.metadata?t.metadata.reelName:"NA",clipName:"".concat(t.clipName),fps:t.metadata?t.metadata.fps:25,sampleRate:t.metadata?t.metadata.sampleRate:"16000",offset:t.metadata?t.metadata.timecode:"00:00:00:00"})}return e})).filter((function(e){return null!==e})).map((function(e,t){return e.id=t+1,e}));return(e=t.events).push.apply(e,Object(te.a)(r)),console.log(t),t},a.programmeScriptJsonToText=function(e){var t="# ".concat(e.title,"\n\n"),a=e.events.map((function(e){return"title"===e.type?"## ".concat(e.text):"voice-over"===e.type?"_".concat(e.text,"_"):"note"===e.type?"[ ".concat(e.text,"]"):"paper-cut"===e.type?"".concat(wt.a.fromSeconds(e.startTime),"\t").concat(wt.a.fromSeconds(e.endTime),"\t").concat(e.speaker,"\t-\t").concat(e.clipName,"     \n").concat(e.words.map((function(e){return e.text})).join(" ")):null}));return"".concat(t).concat(a.join("\n\n"))},a.handleExportJson=function(){var e=a.getProgrammeScriptJson(),t=JSON.stringify(e,null,2);bt()(t,"".concat(a.state.programmeScript.title,".json"),"text/plain")},a.handleExportTxt=function(){var e=a.getProgrammeScriptJson(),t=a.programmeScriptJsonToText(e);bt()(t,"".concat(a.state.programmeScript.title,".txt"),"text/plain")},a.handleUpdatePreview=function(){var e=a.getPlayList();a.setState({resetPreview:!0},(function(){a.setState({resetPreview:!1,playlist:e})})),a.setState({playlist:e})},a.handleDoubleClickOnProgrammeScript=function(e){if("words"===e.target.className){var t=e.target.dataset.start;console.log("wordCurrentTime::",t)}},a.handleSaveProgrammeScript=function(){var e=a.context,t=a.state.programmeScript;if(t){var r=t.elements,n=r.find((function(e){return"insert"===e.type}));if(n){var s=r.indexOf(n);r.splice(s,1)}t.elements=r,e.updatePaperEdit(a.props.projectId,a.props.papereditId,t).then((function(e){"ok"===e.status&&alert("saved programme script")}))}},a.state={programmeScript:null,resetPreview:!1,width:150,playlist:[]},a}return Object(U.a)(t,e),Object(A.a)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateVideoContextWidth)}},{key:"componentDidUpdate",value:function(){this.state.resetPreview&&this.handleUpdatePreview()}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:["text-truncate","text-muted"].join(" "),title:"Programme Script Title: ".concat(this.state.programmeScript?this.state.programmeScript.title:"")},this.state.programmeScript?this.state.programmeScript.title:""),n.a.createElement(be.a,null,n.a.createElement(be.a.Header,{ref:function(t){return e.card=t}},this.state.resetPreview?null:n.a.createElement(lt.a,{width:this.state.width,playlist:this.state.playlist})),n.a.createElement(be.a.Header,null,n.a.createElement(f.a,{noGutters:!0},n.a.createElement(g.a,{sm:12,md:3},n.a.createElement(x.a,{variant:"outline-secondary",onClick:this.handleAddTranscriptSelectionToProgrammeScript,title:"Add a text selection, select text in the transcript, then click this button to add it to the programme script"},n.a.createElement(E.a,{icon:S.o})," Selection")),n.a.createElement(g.a,{sm:12,md:2},n.a.createElement(ve.a,null,n.a.createElement(ve.a.Toggle,{variant:"outline-secondary"},n.a.createElement(E.a,{icon:S.o})),n.a.createElement(ve.a.Menu,null,n.a.createElement(ve.a.Item,{onClick:function(){e.handleAddTranscriptElementToProgrammeScript("title")},title:"Add a title header element to the programme script"},n.a.createElement(E.a,{icon:S.j})," Heading"),n.a.createElement(ve.a.Item,{onClick:function(){e.handleAddTranscriptElementToProgrammeScript("voice-over")},title:"Add a title voice over element to the programme script"},n.a.createElement(E.a,{icon:S.m})," Voice Over"),n.a.createElement(ve.a.Item,{onClick:function(){e.handleAddTranscriptElementToProgrammeScript("note")},title:"Add a note element to the programme script"},n.a.createElement(E.a,{icon:S.s})," Note")))),n.a.createElement(g.a,{sm:12,md:3},n.a.createElement(ve.a,null,n.a.createElement(ve.a.Toggle,{variant:"outline-secondary"},n.a.createElement(E.a,{icon:S.r})," Export"),n.a.createElement(ve.a.Menu,null,n.a.createElement(ve.a.Item,{onClick:this.handleExportEDL,title:"export EDL, edit decision list, to import the programme script as a sequence in video editing software - Avid, Premiere, Davinci Resolve, for FCPX choose FCPX XML"},"EDL - Video ",n.a.createElement(E.a,{icon:S.l})),n.a.createElement(ve.a.Item,{onClick:this.handleExportADL,title:"export ADL, audio decision list, to import the programme script as a sequence in audio editing software such as SADiE"},"ADL - Audio  ",n.a.createElement(E.a,{icon:S.l})),n.a.createElement(ve.a.Item,{onClick:this.handleExportFCPX,title:"export FCPX XML, to import the programme script as a sequence in Final Cut Pro X, video editing software"},"FCPX ",n.a.createElement(E.a,{icon:S.l})),n.a.createElement(ve.a.Divider,null),n.a.createElement(ve.a.Item,{onClick:this.handleExportTxt,title:"export Text, export the programme script as a text version"},"Text File ",n.a.createElement(E.a,{icon:S.l})),n.a.createElement(ve.a.Item,{onClick:function(){alert("export word doc not implemented yet")},title:"export docx, export the programme script as a word document"},"Word Document ",n.a.createElement(E.a,{icon:S.l})),n.a.createElement(ve.a.Divider,null),n.a.createElement(ve.a.Item,{onClick:this.handleExportJson,title:"export Json, export the programme script as a json file"},"Json ",n.a.createElement(E.a,{icon:S.l}))))),n.a.createElement(g.a,{sm:12,md:1},n.a.createElement(x.a,{variant:"outline-secondary",onClick:this.handleSaveProgrammeScript,title:"save programme script",block:!0},n.a.createElement(E.a,{icon:S.p}))))),n.a.createElement(be.a.Body,null,n.a.createElement("article",{style:{height:"60vh",overflow:"scroll"},onDoubleClick:this.handleDoubleClickOnProgrammeScript},this.state.programmeScript?n.a.createElement(St.a,{items:this.state.programmeScript.elements,handleReorder:this.handleReorder,handleDelete:this.handleDelete,handleEdit:this.handleEdit}):null))))}}]),t}(r.Component);kt.contextType=c;var Tt=kt,Pt=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(N.a)(this,Object(D.a)(t).call(this,e))).componentDidMount=function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.context.getProgrammeScriptAndTranscripts(a.state.projectId,a.state.papereditId).then((function(e){a.setState({programmeTitle:e.programmeScript.title,projectTitle:e.project.title,transcripts:e.transcripts,labelsOptions:e.labels})}));case 2:case"end":return e.stop()}}))},a.toggleTranscripts=function(){a.state.isProgramScriptShown&&a.setState((function(e){return{isTranscriptsShown:!e.isTranscriptsShown}}))},a.toggleProgramScript=function(){a.state.isTranscriptsShown&&a.setState((function(e){return{isProgramScriptShown:!e.isProgramScriptShown}}))},a.state={projectId:a.props.match.params.projectId,papereditId:a.props.match.params.papereditId,projectTitle:"",programmeTitle:"",transcripts:null,labelsOptions:[],isTranscriptsShown:!0,isProgramScriptShown:!0,videoHeight:"10em"},a}return Object(U.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return n.a.createElement(p.a,{style:{marginBottom:"5em"},fluid:!0},n.a.createElement("br",null),n.a.createElement(f.a,null,n.a.createElement(g.a,{sm:12},n.a.createElement(v.a,{items:[{name:"Projects",link:"/projects"},{name:"Project: ".concat(this.state.projectTitle),link:"/projects/".concat(this.state.projectId)},{name:"PaperEdits"},{name:"".concat(this.state.programmeTitle)}]}))),n.a.createElement(p.a,{fluid:!0},n.a.createElement("div",{className:"d-flex flex-column"},n.a.createElement(fe.a,{size:"sm",className:"mt-12"},n.a.createElement(x.a,{onClick:this.toggleTranscripts,variant:this.state.isTranscriptsShown?"secondary":"outline-secondary"},"Transcripts ",n.a.createElement(E.a,{icon:this.state.isTranscriptsShown?S.b:S.c})," ",this.state.isTranscriptsShown?"hide":"show"),n.a.createElement(x.a,{onClick:this.toggleProgramScript,variant:this.state.isProgramScriptShown?"secondary":"outline-secondary"},"Program Script  ",n.a.createElement(E.a,{icon:this.state.isProgramScriptShown?S.b:S.c}),"  ",this.state.isProgramScriptShown?"hide":"show"))),n.a.createElement(f.a,null,n.a.createElement(g.a,{xs:{span:12,offset:0},sm:{span:this.state.isProgramScriptShown?7:12,offset:(this.state.isProgramScriptShown,0)},md:{span:this.state.isProgramScriptShown?7:12,offset:(this.state.isProgramScriptShown,0)},lg:{span:this.state.isProgramScriptShown?7:10,offset:this.state.isProgramScriptShown?0:1},xl:{span:this.state.isProgramScriptShown?7:10,offset:this.state.isProgramScriptShown?0:1},style:{display:this.state.isTranscriptsShown?"block":"none"}},this.state.transcripts?n.a.createElement(ct,{projectId:this.state.projectId,transcripts:this.state.transcripts,labelsOptions:this.state.labelsOptions}):n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("i",null,"No Transcripts, create a transcript to get started"))),n.a.createElement(g.a,{xs:{span:12,offset:0},sm:{span:this.state.isTranscriptsShown?5:12,offset:(this.state.isTranscriptsShown,0)},md:{span:this.state.isTranscriptsShown?5:12,offset:(this.state.isTranscriptsShown,0)},lg:{span:this.state.isTranscriptsShown?5:10,offset:this.state.isTranscriptsShown?0:1},xl:{span:this.state.isTranscriptsShown?5:8,offset:this.state.isTranscriptsShown?0:2},style:{display:this.state.isProgramScriptShown?"block":"none"}},this.state.transcripts?n.a.createElement(Tt,{projectId:this.state.projectId,papereditId:this.state.papereditId,transcripts:this.state.transcripts,videoHeight:this.props.videoHeight}):null))))}}]),t}(r.Component);Pt.contextType=c;var Ot=Pt,Ct=a(96),It=a(56),Lt=function(){return n.a.createElement("div",null,n.a.createElement("h1",null,"404 Page Not Found"),n.a.createElement("p",null,"There was an error loading the page you requested!"))},At=function(){return n.a.createElement(Ct.HashRouter,{basename:"/"},n.a.createElement(It.g,null,n.a.createElement(It.d,{exact:!0,path:"/",component:se}),n.a.createElement(It.d,{exact:!0,path:"/projects",component:se}),n.a.createElement(It.d,{exact:!0,path:"/projects/:projectId",component:ue}),n.a.createElement(It.d,{exact:!0,path:"/projects/:projectId/paperedits/:papereditId",component:Ot}),n.a.createElement(It.d,{exact:!0,path:"/projects/:projectId/transcripts/:transcriptId/correct",component:me}),n.a.createElement(It.d,{component:Lt})))},Nt=n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null," This is a demo version of the app ",n.a.createElement(u.a.Link,{href:"https://github.com/bbc/digital-paper-edit-client",target:"_blank",rel:"noopener noreferrer"},"see project Github repository for more info"),"."),n.a.createElement("p",null,"This is a read-only demo you can only play around with existing projects!")),Dt=function(){var e=null,t=null;return e=n.a.createElement(p.a,null,n.a.createElement(l.a,{variant:"warning",heading:"Demo mode",message:Nt})),navigator.onLine||(t=n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement(p.a,null,n.a.createElement(l.a,{variant:"warning",heading:"Offline warning",message:"You don't seem to be connected to the internet "})))),n.a.createElement(n.a.Fragment,null,e,t,n.a.createElement(c.Provider,{value:K},n.a.createElement(At,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(Dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[215,1,2]]]);
//# sourceMappingURL=main.2005fcb8.chunk.js.map