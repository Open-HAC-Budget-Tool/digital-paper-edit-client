{"version":3,"sources":["ApiWrapper/cors_wrapper.js","ApiWrapper/ApiWrapper.js","ApiWrapper/DemoApiWrapper/index.js","Util/which-js-env/index.js","ApiWrapper/index.js","Components/lib/SimpleCard/index.js","Components/lib/List/index.js","Components/lib/SimpleListItem/index.js","Components/Playlist/Playlist.js","Components/Transcripts/TranscriptView.js"],"names":["METHODS","validateRESTMethod","method","includes","Error","getCorsConfig","corsConfig","data","applicationType","mode","body","JSON","stringify","headers","corsFetch","url","a","async","fetch","ApiWrapper","projectsIdUrl","projectId","projectsUrl","transcriptsUrl","transcriptsIdUrl","transcriptId","queryParamsOptions","queryParams","querystring","trim","paperEditsUrl","paperEditsIdUrl","paperEditId","annotationsUrl","annotationsIdUrl","annotationId","labelsUrl","labelsIdUrl","labelsId","this","baseUrl","window","env","API_URL","res","json","projects","id","getProject","resProject","projectTitle","project","title","transcriptTitle","labelId","paperedits","getTranscript","transcriptResult","getAllLabels","labelsResults","getAllAnnotations","annotationsResult","results","labels","transcript","annotations","papereditId","getTranscripts","transcriptsResult","Promise","all","transcripts","map","transcriptsJson","annotationsJson","forEach","tr","currentAnnotationsSet","find","getPaperEdit","paperEditResult","projectResult","programmeScript","fileName","resolve","reject","input","output","ffmpegPath","waveForm","waveFormMode","waveFormColor","DemoApiWrapper","response","length","_id","status","alert","ok","filter","formData","playlistItem","items","item","slug","annotation","defaultLabel","label","unshift","paperedit","paperEdit","statusCode","whichJsEnv","undefined","process","versions","electron","console","debug","cep","error","jsENV","log","demoApiWrapper","Object","freeze","apiWrapper","electronWrapper","ElectronWrapper","adobeCEPWrapper","AdobeCEPWrapper","SimpleCard","handleDelete","confirm","props","handleEdit","showLinkPath","ListGroup","Item","Row","to","style","cursor","Col","xs","sm","md","ld","xl","Card","Title","icon","href","Link","Button","onClick","variant","size","faPen","faTrash","Subtitle","className","description","Component","React","SimpleItem","action","Playlist","state","isNewItemModalShow","itemId","height","overflow","key","TranscriptViewer","lazy","TranscriptView","componentDidMount","updateTranscript","componentDidUpdate","match","params","setState","then","transcriptJson","clipName","handleSave","autoSaveData","savedNotification","transcriptViewerRef","createRef","mediaType","path","extname","Container","backgroundColor","fluid","fallback","lg","Skeleton","width","transcriptData","mediaUrl","isEditable","autoSaveContentType"],"mappings":"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","file":"static/js/5.914fa04f.chunk.js","sourcesContent":["/**\n * Helper function tto wrap fetch post request\n * https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#Supplying_request_options\n * @param {string} url - API end point\n * @param {object} data - json data to send\n */\n\nconst METHODS = [ 'GET', 'POST', 'PUT', 'DELETE' ];\n\nconst validateRESTMethod = (method) => {\n  if (!METHODS.includes(method)) {\n    throw new Error(`Wrong method passed ${ method } - should be one of ${ METHODS }`);\n  }\n\n  return;\n\n};\n\nconst getCorsConfig = (method, data = {}, applicationType) => {\n  let corsConfig;\n\n  if (method === 'PUT') {\n    corsConfig = {\n      method: method,\n      mode: 'cors',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n  } else if (method === 'POST') {\n\n    corsConfig = {\n      method: method,\n      // TODO: commenting all of these settings out as with those on file upload doesn't work :man-shrugging: . Needs further investigation.\n      // mode: 'no-cors',\n      // cache: 'no-cache',\n      // credentials: 'same-origin',\n      // headers: {\n      //   'Content-Type': 'application/json'\n      // },\n      // redirect: 'follow',\n      // referrer: 'no-referrer',\n      // NOTE: Form data contains a file, so should not be stringified\n      // body: data\n    };\n    // if sending data as a json file\n    if (applicationType === 'json') {\n      corsConfig.headers = {\n        'Content-Type': 'application/json'\n      };\n      corsConfig.body = JSON.stringify(data);\n    }\n    // if sending something else like a video or audio file in form body\n    else {\n      corsConfig.body = data;\n    }\n  }\n  else {\n    corsConfig = {\n      method: method,\n      mode: 'cors'\n    };\n  }\n\n  return corsConfig;\n};\n\nasync function corsFetch(url, method = 'GET', data = {}, applicationType) {\n  validateRESTMethod(method);\n  const corsConfig = getCorsConfig(method, data, applicationType);\n\n  return await fetch(url, corsConfig);\n}\n\nexport default corsFetch;\n","import querystring from 'querystring';\nimport corsFetch from './cors_wrapper.js';\n\nclass ApiWrapper {\n  constructor() {\n    this.baseUrl = window.env.API_URL;\n    window.env.API_URL = null;\n\n    this.projectsUrl = `${ this.baseUrl }/api/projects`;\n  }\n  projectsIdUrl = (projectId) => `${ this.projectsUrl }/${ projectId }`;\n\n  transcriptsUrl = (projectId) => `${ this.projectsIdUrl(projectId) }/transcripts`;\n  transcriptsIdUrl = (projectId, transcriptId, queryParamsOptions) => {\n    const queryParams = queryParamsOptions\n      ? `?${ querystring.stringify(queryParamsOptions) }`\n      : '';\n\n    return `${ this.transcriptsUrl(projectId) }/${ transcriptId }${ queryParams }`.trim();\n  };\n\n  paperEditsUrl = (projectId) => `${ this.projectsIdUrl(projectId) }/paperedits`;\n  paperEditsIdUrl = (projectId, paperEditId) => `${ this.projectsIdUrl(projectId) }/paperedits/${ paperEditId }`;\n\n  annotationsUrl = (projectId, transcriptId) => `${ this.transcriptsIdUrl(projectId, transcriptId) }/annotations`;\n  annotationsIdUrl = (projectId, transcriptId, annotationId) => `${ this.transcriptsIdUrl(projectId, transcriptId) }/annotations/${ annotationId }`;\n\n  labelsUrl = (projectId) => `${ this.projectsIdUrl(projectId) }/labels`;\n  labelsIdUrl = (projectId, labelsId) => `${ this.projectsIdUrl(projectId) }/labels/${ labelsId }`;\n\n  /**\n   * Projects\n   */\n  async getAllProjects() {\n    const res = await corsFetch(this.projectsUrl);\n    const json = await res.json();\n\n    return json.projects;\n  }\n\n  async getProject(id) {\n    const res = await corsFetch(this.projectsIdUrl(id));\n    const json = await res.json();\n\n    return json;\n  }\n\n  async createProject(data) {\n    const res = await corsFetch(this.projectsUrl, 'POST', data, 'json');\n\n    return await res.json();\n  }\n\n  async updateProject(id, data) {\n    const res = await corsFetch(this.projectsIdUrl(id), 'PUT', data);\n    const json = await res.json();\n\n    return json;\n  }\n\n  async deleteProject(id) {\n    const res = await corsFetch(this.projectsIdUrl(id), 'DELETE');\n\n    return res;\n  }\n\n  /**\n   * Transcripts\n   */\n  async getTranscripts(projectId) {\n    const res = await corsFetch(this.transcriptsUrl(projectId));\n    const json = await res.json();\n\n    return json;\n  }\n\n  async createTranscript(projectId, data) {\n    const res = await corsFetch(this.transcriptsUrl(projectId), 'POST', data);\n    const json = await res.json();\n\n    return json;\n  }\n  async getTranscript(projectId, transcriptId, queryParamsOptions) {\n    const res = await corsFetch(this.transcriptsIdUrl(projectId, transcriptId, queryParamsOptions));\n    const json = await res.json();\n    // get project title\n    const resProject = await this.getProject(projectId);\n    // console.log('resProject', resProject.project.title, json);\n    json.projectTitle = resProject.project.title;\n    json.transcriptTitle = json.title;\n    delete json.title;\n\n    return json;\n  }\n\n  async updateTranscript(projectId, transcriptId, queryParamsOptions, data) {\n    const res = await corsFetch(this.transcriptsIdUrl(projectId, transcriptId, queryParamsOptions), 'PUT', data);\n\n    return res;\n  }\n\n  async deleteTranscript(projectId, transcriptId) {\n    const res = await corsFetch(this.transcriptsIdUrl(projectId, transcriptId), 'DELETE');\n\n    return res;\n  }\n\n  /**\n   * Annotations\n   */\n  async getAllAnnotations(projectId, transcriptId) {\n    const res = await fetch(this.annotationsUrl(projectId, transcriptId));\n    // console.log('getAllAnnotations', res);\n    const json = await res.json();\n\n    return json;\n  }\n\n  // not used\n  async getAnnotation(projectId, transcriptId, annotationId) {\n    const res = await corsFetch(this.annotationsIdUrl(projectId, transcriptId, annotationId));\n    const json = await res.json();\n\n    return json;\n  }\n\n  async createAnnotation(projectId, transcriptId, data) {\n    const res = await corsFetch(this.annotationsUrl(projectId, transcriptId), 'POST', data, 'json');\n\n    return await res.json();\n  }\n\n  async updateAnnotation(projectId, transcriptId, annotationId, data) {\n    const res = await corsFetch(this.annotationsIdUrl(projectId, transcriptId, annotationId), 'PUT', data);\n    const json = await res.json();\n\n    return json;\n  }\n\n  async deleteAnnotation(projectId, transcriptId, annotationId) {\n    const res = await corsFetch(this.annotationsIdUrl(projectId, transcriptId, annotationId), 'DELETE');\n    const json = await res.json();\n\n    return json;\n  }\n\n  /**\n   * Labels\n   */\n\n  // Get All Labels\n  async getAllLabels(projectId) {\n    const res = await fetch(this.labelsUrl(projectId));\n    const json = await res.json();\n\n    return json;\n  }\n  // Get Label - not used\n  async getLabel(projectId, labelId) {\n    const res = await corsFetch(this.labelsIdUrl(projectId, labelId));\n    const json = await res.json();\n\n    return json;\n  }\n\n  // Create Label\n  async createLabel(projectId, data) {\n    const res = await corsFetch(this.labelsUrl(projectId), 'POST', data, 'json');\n    const json = await res.json();\n\n    return json;\n  }\n  // Update Label\n  async updateLabel(projectId, labelId, data) {\n    const res = await corsFetch(this.labelsIdUrl(projectId, labelId), 'PUT', data);\n    const json = await res.json();\n\n    return json;\n  }\n  // Delete Label\n  async deleteLabel(projectId, labelId) {\n    const res = await corsFetch(this.labelsIdUrl(projectId, labelId), 'DELETE');\n    const json = await res.json();\n\n    return json;\n  }\n  /**\n   * PaperEdits\n   */\n  async getAllPaperEdits(projectId) {\n    const res = await corsFetch(this.paperEditsUrl(projectId));\n    const json = await res.json();\n\n    return json.paperedits;\n  }\n\n  async getPaperEdit(projectId, id) {\n    const res = await corsFetch(this.paperEditsIdUrl(projectId, id));\n    const json = await res.json();\n\n    return json;\n  }\n\n  async createPaperEdit(projectId, data) {\n    const res = await corsFetch(this.paperEditsUrl(projectId), 'POST', data, 'json');\n\n    return await res.json();\n  }\n\n  async updatePaperEdit(projectId, id, data) {\n    const res = await corsFetch(this.paperEditsIdUrl(projectId, id), 'PUT', data);\n    const json = await res.json();\n\n    return json;\n  }\n\n  async deletePaperEdit(projectId, id) {\n    const res = await corsFetch(this.paperEditsIdUrl(projectId, id), 'DELETE');\n\n    return res;\n  }\n\n  /**\n   * Helper SDK function to avoid making multiple calls client side when in Annotated Transcript view\n   * Transcript + Annotations for that transcript + Labels for the project\n   */\n  async getTranscriptLabelsAnnotations(projectId, transcriptId) {\n    // GET Transcripts\n    const transcriptResult = await this.getTranscript(projectId, transcriptId);\n    // GET Labels for Project <-- or separate request in label component\n    const labelsResults = await this.getAllLabels(projectId, transcriptId);\n    // GET Annotation for Transcript\n    const annotationsResult = await this.getAllAnnotations(projectId, transcriptId);\n\n    // Combine results\n    const results = {\n      transcriptId: transcriptId,\n      projectId: projectId,\n      projectTitle: transcriptResult.projectTitle,\n      transcriptTitle: transcriptResult.transcriptTitle,\n      url: transcriptResult.url,\n      labels: labelsResults.labels,\n      transcript:  transcriptResult.transcript,\n      annotations: annotationsResult.annotations\n    };\n\n    return results;\n  }\n\n  // Helper function to get program script & associated transcript\n  // https://flaviocopes.com/javascript-async-await-array-map/\n  async getProgrammeScriptAndTranscripts(projectId, papereditId) {\n    // get transcripts list, this contain id, title, description only\n    const transcriptsResult = await this.getTranscripts(projectId);\n    // use that list of ids to loop through and get json payload for each individual transcript\n    // as separate request\n\n    // TODO: also add annotations for each Transcripts\n    const transcriptsJson = await Promise.all(transcriptsResult.transcripts.map((transcript) => {\n      // const annotations = this.getAllAnnotations(projectId, transcript.id);\n      const transcriptTmp = this.getTranscript(projectId, transcript.id);\n      // transcriptTmp.annotations = annotations;\n\n      return transcriptTmp;\n    }));\n\n    const annotationsJson = await Promise.all(transcriptsResult.transcripts.map((transcript) => {\n      const annotations = this.getAllAnnotations(projectId, transcript.id);\n\n      return annotations;\n    }));\n\n    // add annotations to transcript\n    transcriptsJson.forEach((tr) => {\n      // get annotations for transcript\n      const currentAnnotationsSet = annotationsJson.find((a) => {\n\n        return a.transcriptId === tr.id;\n      });\n      // if there are annotations for this transcript add them to it\n      if (currentAnnotationsSet) {\n        tr.annotations = currentAnnotationsSet.annotations;\n\n        return;\n      }\n      else {\n        tr.annotations = [];\n      }\n    });\n\n    // getting program script for paperEdit\n    const paperEditResult = await this.getPaperEdit(projectId, papereditId);\n    // getting project info - eg to get tile and description\n    const projectResult = await this.getProject(projectId);\n    // Get labels\n    const labelsResults = await this.getAllLabels(projectId);\n    // package results\n    const results = {\n      programmeScript: paperEditResult.programmeScript,\n      project: projectResult.project,\n      // each transcript contains its annotations\n      transcripts: transcriptsJson,\n      labels: labelsResults.labels\n    };\n\n    return results;\n  }\n\n  async exportVideo(data, fileName){\n    return new Promise((resolve, reject) => {\n      // In electron prompt for file destination \n      // default to desktop on first pass \n      const ffmpegRemixData = {\n        input: data, \n        output: `~/Desktop/${fileName}`,\n        ffmpegPath: ''//add electron ffmpeg bin \n      }\n      resolve(ffmpegRemixData)\n    })\n  }\n\n  async exportAudio(data, fileName,waveForm, waveFormMode, waveFormColor){\n    return new Promise((resolve, reject) => {\n      // In electron prompt for file destination \n      // default to desktop on first pass \n      const ffmpegRemixData = {\n        input: data, \n        output: `~/Desktop/${fileName}`,\n        ffmpegPath: ''//add electron ffmpeg bin \n      }\n      resolve(ffmpegRemixData)\n    })\n  }\n}\n\nexport default ApiWrapper;","import items from '../../playlist.json'\n\nclass DemoApiWrapper {\n  /**\n   * Projects\n   */\n  // eslint-disable-next-line class-methods-use-this\n  async getAllProjects() {\n    const response = await fetch('db/projects.json');\n    const projects = await response.json();\n    let results = 0;\n    if (projects.length !== 0) {\n      results = projects.map((project) => {\n        project.id = project._id;\n\n        return project;\n      });\n\n      return results;\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getProject(id) {\n    const response = await fetch('db/projects.json');\n    const projects = await response.json();\n    const project = projects.find((project) => {\n      return project._id === id;\n    });\n\n    return { status: 'ok', project:project };\n  }\n\n  async createProject(data) {\n    alert('Not implemented in demo mode');\n\n    return { status: 'false' };\n  }\n\n  async updateProject(id, data) {\n    alert('Not implemented in demo mode');\n\n    return { status: 'false' };\n  }\n\n  async deleteProject(id) {\n    alert('Not implemented in demo mode');\n\n    return { ok: false, status: 'false', project: { } };\n  }\n\n  /**\n   * Transcripts\n   */\n  // eslint-disable-next-line class-methods-use-this\n  async getTranscripts(projectId) {\n    const response = await fetch('db/transcripts.json');\n    let transcripts = await response.json();\n    transcripts = transcripts.filter((transcript) => {\n      return transcript.projectId === projectId;\n    });\n\n    transcripts = transcripts.map((transcript) => {\n      transcript.id = transcript._id;\n\n      return transcript;\n    });\n\n    return { transcripts: transcripts };\n  }\n\n  async createTranscript(projectId, formData, data) {\n    alert('Not implemented in demo mode');\n\n    return { status: 'false' };\n  }\n\n  async getTranscript(projectId, transcriptId, queryParamsOptions) {\n    const response = await fetch('db/transcripts.json');\n    const transcripts = await response.json();\n\n    const playlistItem = items.find((item) => item.slug === transcriptId)\n\n    const transcript = transcripts.find((transcript) => {\n      return transcript._id === playlistItem.id;\n    });\n\n    transcript.id = transcript._id;\n    transcript.transcriptTitle = transcript.title;\n\n    return transcript;\n  }\n\n  async updateTranscript(projectId, transcriptId, queryParamsOptions, data) {\n    alert('Not implemented in demo mode');\n\n    return { ok: false };\n  }\n\n  async deleteTranscript(projectId, transcriptId) {\n    alert('Not implemented in demo mode');\n\n    return { ok: false, status: 'false' };\n  }\n\n  /**\n   * Annotations\n   */\n  // eslint-disable-next-line class-methods-use-this\n  async getAllAnnotations(projectId, transcriptId) {\n\n    const response = await fetch('db/annotations.json');\n    let annotations = await response.json();\n\n    annotations = annotations.filter((annotation) => {\n      return annotation.transcriptId === transcriptId;\n    });\n\n    if (annotations) {\n      annotations = annotations\n        .map((annotation) => {\n          annotation.id = annotation._id;\n\n          return annotation;\n        });\n    } else {\n      annotations = [];\n    }\n\n    return { annotations };\n  }\n\n  // not used\n  async getAnnotation(projectId, transcriptId, annotationId) {\n    const response = await fetch('db/annotations.json');\n    const annotations = await response.json();\n    const annotation = annotations[0];\n\n    return { annotation };\n  }\n\n  async createAnnotation(projectId, transcriptId, data) {\n    alert('Not implemented in demo mode');\n\n    return { 'ok': false, status: 'false', annotation: [] };\n  }\n\n  async deleteAnnotation(projectId, transcriptId, annotationId) {\n    alert('Not implemented in demo mode');\n\n    return { 'ok': false, status: 'false' };\n  }\n\n  /**\n   * Labels\n   */\n\n  // Get All Labels\n  // eslint-disable-next-line class-methods-use-this\n  async getAllLabels(projectId) {\n    const response = await fetch('db/labels.json');\n    let labels = await response.json();\n    const defaultLabel = labels[0];\n    labels = labels.filter((label) => {\n      return label.projectId === projectId;\n    });\n    labels.unshift(defaultLabel);\n\n    if (!labels) {\n      labels = [];\n    }\n\n    return { ok: true, status: 'ok', labels };\n  }\n  // Get Label - not used\n  async getLabel(projectId, labelId) {\n    const response = await fetch('db/labels.json');\n    const labels = await response.json();\n    const label = labels[0];\n\n    return { ok: true, status: 'ok', label };\n  }\n\n  // Create Label\n  async createLabel(projectId, data) {\n    alert('Not implemented in demo mode');\n\n    return ({ ok: false, status: 'false' });\n  }\n\n  // Update Label\n  async updateLabel(projectId, labelId, data) {\n    alert('Not implemented in demo mode');\n\n    return { ok: false, status: 'false' };\n  }\n  // Delete Label\n  async deleteLabel(projectId, labelId) {\n    alert('Not implemented in demo mode');\n\n    return { status: 'false' };\n  }\n  /**\n   * PaperEdits\n   */\n  // eslint-disable-next-line class-methods-use-this\n  async getAllPaperEdits(projectId) {\n    const response = await fetch('db/paperedits.json');\n    let paperedits = await response.json();\n    paperedits = paperedits.filter((paperedit) => {\n      return paperedit.projectId === projectId;\n    });\n    const data = {};\n    data.paperedits = [];\n    data.paperedits = paperedits;\n    if (data.paperedits) {\n      data.paperedits = data.paperedits\n        .map((paperedit) => {\n          paperedit.id = paperedit._id;\n\n          return paperedit;\n        });\n    }\n\n    return data.paperedits;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getPaperEdit(projectId, id) {\n    const paperEditId = id;\n    const response = await fetch('db/paperedits.json');\n    const paperedits = await response.json();\n    const paperEdit = paperedits.find((paperedit) => {\n      return paperedit.id === paperEditId;\n    });\n    if (!paperEdit) {\n      const err = new Error('No paper edit found');\n      err.statusCode = 404;\n    }\n\n    return { ok: true, status: 'ok', programmeScript: paperEdit };\n  }\n\n  async createPaperEdit(projectId, data) {\n    alert('Not implemented in demo mode');\n\n    return { ok: false, status: 'false' };\n  }\n\n  async updatePaperEdit(projectId, id, data) {\n    alert('Not implemented in demo mode');\n\n    return { ok:true, status: 'false' };\n  }\n\n  async deletePaperEdit(projectId, id) {\n    alert('Not implemented in demo mode');\n\n    return { ok: false, status: 'false' };\n  }\n\n  /**\n   * Helper SDK function to avoid making multiple calls client side when in Annotated Transcript view\n   * Transcript + Annotations for that transcript + Labels for the project\n   */\n  async getTranscriptLabelsAnnotations(projectId, transcriptId) {\n    // GET Transcripts\n    const transcriptResult = await this.getTranscript(projectId, transcriptId);\n    // GET Labels for Project <-- or separate request in label component\n    const labelsResults = await this.getAllLabels(projectId, transcriptId);\n    // GET Annotation for Transcript\n    const annotationsResult = await this.getAllAnnotations(projectId, transcriptId);\n\n    // Combine results\n    const results = {\n      transcriptId: transcriptId,\n      projectId: projectId,\n      projectTitle: transcriptResult.projectTitle,\n      transcriptTitle: transcriptResult.transcriptTitle,\n      url: transcriptResult.url,\n      labels: labelsResults.labels,\n      transcript:  transcriptResult.transcript,\n      annotations: annotationsResult.annotations\n    };\n\n    return results;\n  }\n\n  // Helper function to get program script & associated transcript\n  // https://flaviocopes.com/javascript-async-await-array-map/\n  async getProgrammeScriptAndTranscripts(projectId, papereditId) { // // get transcripts list, this contain id, title, description only\n    const transcriptsResult = await this.getTranscripts(projectId);\n    // use that list of ids to loop through and get json payload for each individual transcript\n    // as separate request\n\n    const transcriptsJson = await Promise.all(transcriptsResult.transcripts.map((transcript) => {\n      const transcriptTmp = this.getTranscript(projectId, transcript.id);\n\n      return transcriptTmp;\n    }));\n\n    const annotationsJson = await Promise.all(transcriptsResult.transcripts.map((transcript) => {\n      const annotations = this.getAllAnnotations(projectId, transcript.id);\n\n      return annotations;\n    }));\n\n    // add annotations to transcript\n    transcriptsJson.forEach((tr) => {\n      // get annotations for transcript\n      const currentAnnotationsSet = annotationsJson.find((a) => {\n\n        return a.transcriptId === tr.id;\n      });\n      // if there are annotations for this transcript add them to it\n      if (currentAnnotationsSet) {\n        tr.annotations = currentAnnotationsSet.annotations;\n\n        return;\n      }\n      else {\n        tr.annotations = [];\n      }\n    });\n\n    // getting program script for paperEdit\n    const paperEditResult = await this.getPaperEdit(projectId, papereditId);\n    // getting project info - eg to get tile and description\n    const projectResult = await this.getProject(projectId);\n    // Get labels\n    const labelsResults = await this.getAllLabels(projectId);\n    // package results\n    const results = {\n      programmeScript: paperEditResult.programmeScript,\n      project: projectResult.project,\n      // each transcript contains its annotations\n      transcripts: transcriptsJson,\n      labels: labelsResults.labels\n    };\n\n    return results;\n  }\n}\n\n// module.exports = DemoApiWrapper;\nexport default DemoApiWrapper;","/**\n * Determines the enviroment Javascript is being run on\n * @returns - 'browser', 'electron', 'cep'. where cep stands for adobe CEP panel\n */\nfunction whichJsEnv() {\n  // Is browser Eg client side app\n  if (window.process === undefined) {\n    // console.debug('In browser Environment');\n    if (process.env.REACT_APP_NODE_ENV === 'demo') {\n      return 'demo';\n    }\n\n    return 'browser';\n  } else {\n    if (window.process.versions.electron !== undefined) {\n      console.debug('In Electron Enviroment');\n      //   console.info('In Electron v: ', window.process.versions.electron);\n      //   console.info('Using chrome v: ', window.process.versions.chrome);\n      return 'electron';\n    } else if (window.process.versions.cep !== undefined) {\n      console.debug('In Adobe CEP Environment');\n      //   console.info('In Chromium v: ', window.process.versions.chromium);\n      //   console.info('In CEP (Adobe Common Extensibility Platform ) v: ', window.process.versions.cep);\n      //   console.info('adjusting current working directory for Adobe CEP');\n      //   console.log('Starting directory: ' + process.cwd());\n      // try {\n      //   // commenting out because of error \"chdir: Error: process.chdir is not supported\"\n      //   // process.chdir(__dirname);\n      //   // process.chdir('..');\n      //   // console.log('New directory: ' + process.cwd());\n      // }\n      // catch (err) {\n      //   console.log('chdir: ' + err);\n      // }\n      return 'cep';\n    } else {\n      console.error(\"couldn't determine the js environment\");\n\n      return undefined;\n    }\n  }\n}\n\nfunction isBrowser() {\n  return whichJsEnv() === 'browser';\n}\n\nfunction isElectron() {\n  return whichJsEnv() === 'electron';\n}\n\nfunction isCep() {\n  return whichJsEnv() === 'isCep';\n}\n\nexport default whichJsEnv;\n\nexport { isElectron, isBrowser, isCep, whichJsEnv };\n","import ApiWrapper from './ApiWrapper';\nimport DemoApiWrapper from './DemoApiWrapper/index.js';\nimport whichJsEnv from '../Util/which-js-env';\n\nconst jsENV = whichJsEnv();\n\n// dynamic export\n// https://medium.com/@WebReflection/javascript-dynamic-import-export-b0e8775a59d4\nexport default (() => {\n  // await async dependencies\n  // export the module\n  if (jsENV === 'demo') {\n    console.log('API Wrapper demo time!');\n    const demoApiWrapper = new DemoApiWrapper();\n    Object.freeze(demoApiWrapper);\n\n    return demoApiWrapper;\n  }\n  if (jsENV === 'browser') {\n    const apiWrapper = new ApiWrapper();\n    Object.freeze(apiWrapper);\n\n    return apiWrapper;\n  }\n  if (jsENV === 'electron') {\n    // try {\n    //   const { ipcRenderer } = require('electron');\n    //   const appPath = ipcRenderer.sendSync('synchronous-message-get-app-path', 'ping');\n    // const path = require('path');\n    // console.log(window.appPath, 'window.AppPath', 'process.cwd()', process.cwd());\n    //   window.process.chdir(appPath);\n    // const ElectronWrapper = require(path.join(window.appPath, 'src', 'ElectronWrapper', 'index.js'));\n    const ElectronWrapper = window.ElectronWrapper;\n    const electronWrapper = new ElectronWrapper();\n    Object.freeze(electronWrapper);\n    return electronWrapper;\n    // } catch (e) {\n    //   console.error('api wrapper electron', e);\n    // }\n  }\n  if (jsENV === 'cep') {\n    // TODO: not sure if this will work\n    // try {\n    // console.log('__dirname', __dirname);\n    // console.log('process.cwd()', process.cwd());\n    // /////////////////////////\n    // console.log('  process.chdir(__dirname);');\n    // process.chdir(__dirname);\n    // /////////////////////////\n    // console.log('__dirname', __dirname);\n    // console.log('process.cwd()', process.cwd());\n\n    // const path = require('path');\n    // const AdobeCEPWrapper = require(path.join(__dirname, 'src', 'AdobeCEPWrapper', 'index.js'));\n    // window.AdobeCEPWrapper = AdobeCEPWrapper;\n\n    const AdobeCEPWrapper = window.AdobeCEPWrapper;\n    const adobeCEPWrapper = new AdobeCEPWrapper();\n    Object.freeze(adobeCEPWrapper);\n\n    return adobeCEPWrapper;\n    // } catch (err) {\n    //   console.log('chdir: ' + err);\n    // }\n  }\n})();\n","import React, { Component } from 'react';\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Button from 'react-bootstrap/Button';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash, faPen } from '@fortawesome/free-solid-svg-icons';\n\nclass SimpleCard extends Component {\n  handleDelete = () => {\n    //eslint-disable-next-line\n    const confirmationPrompt = confirm(\"Click OK if you wish to delete, cancel if you don't\");\n    if (confirmationPrompt === true) {\n      if (this.props.handleDelete) {\n        this.props.handleDelete(this.props.id);\n      }\n    } else {\n      alert('All is good, it was not deleted');\n    }\n  };\n\n  handleEdit = () => {\n    this.props.handleEdit(this.props.id);\n  };\n  showLinkPath = () => {\n    return this.props.showLinkPath(this.props.id);\n  };\n\n  render() {\n    return (\n      <ListGroup.Item>\n        {/* <Card.Body> */}\n        <Row>\n          <LinkContainer to={this.showLinkPath()} style={{ cursor: 'pointer' }}>\n            <Col xs={8} sm={10} md={10} ld={10} xl={10}>\n              <Card.Title>\n                {this.props.icon} <a href={`#/${this.showLinkPath()}`}>{this.props.title}</a>\n              </Card.Title>\n            </Col>\n          </LinkContainer>\n          <Col xs={2} sm={1} md={1} ld={1} xl={1}>\n            <Card.Link>\n              <Button onClick={this.handleEdit} variant=\"secondary\" size=\"sm\">\n                <FontAwesomeIcon icon={faPen} />\n              </Button>\n            </Card.Link>\n          </Col>\n          <Col xs={2} sm={1} md={1} ld={1} xl={1}>\n            <Card.Link>\n              <Button onClick={this.handleDelete} variant=\"secondary\" size=\"sm\">\n                <FontAwesomeIcon icon={faTrash} />\n              </Button>\n            </Card.Link>\n          </Col>\n        </Row>\n        <LinkContainer to={this.showLinkPath()} style={{ cursor: 'pointer' }}>\n          <Row>\n            <Col xs={10} sm={11} md={11} ld={11} xl={11}>\n              <Card.Subtitle className=\"mb-2 text-muted\">{this.props.description}</Card.Subtitle>\n            </Col>\n          </Row>\n        </LinkContainer>\n        {/* </Card.Body> */}\n      </ListGroup.Item>\n    );\n  }\n}\n\nexport default SimpleCard;\n","import React from 'react';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport SimpleCard from '../SimpleCard';\n\nclass List extends React.Component {\n\n  render() {\n\n    const listItems = this.props.items.map((item) => {\n      if (item.display) {\n        return <SimpleCard\n          key={ item.id }\n          id={ item.id }\n          title={ item.title }\n          icon={ this.props.icon }\n          description={ item.description }\n          handleEdit={ this.props.handleEdit }\n          handleDelete={ this.props.handleDelete }\n          showLinkPath={ this.props.showLinkPath }\n        />;\n      } else {\n        return null;\n      }\n    }).filter(item => {\n      return item !== null;\n    });\n\n    return (<>\n      <ListGroup \n      style={ { height: '75vh', overflow: 'scroll' } } \n      // variant=\"flush\"\n      >\n        {listItems}\n      </ListGroup>\n    </>\n    );\n  }\n}\n\nexport default List;\n","import React, { Component } from 'react';\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport { Link } from 'react-router-dom';\nimport { LinkContainer } from 'react-router-bootstrap';\n\nclass SimpleItem extends Component {\n  showLinkPath = () => {\n    return this.props.showLinkPath(this.props.slug);\n  };\n\n  render() {\n    return (\n      <LinkContainer to={this.showLinkPath()} style={{ cursor: 'pointer' }}>\n        <ListGroup.Item action>\n          {this.props.title}\n        </ListGroup.Item>\n      </LinkContainer>\n    );\n  }\n}\n\nexport default SimpleItem;\n","import React from 'react';\nimport ApiWrapper from '../../ApiWrapper/index.js';\nimport List from '../lib/List';\nimport { HashRouter } from 'react-router-dom';\nimport { faFolder } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport SimpleItem from '../lib/SimpleListItem';\n\nclass Playlist extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: [],\n      isNewItemModalShow: false,\n      title: '',\n      description: '',\n      itemId: null,\n    };\n  }\n\n  showLinkPath = id => {\n    return `/transcripts/${id}`\n  };\n\n  render() {\n    return (\n      <>\n        <HashRouter>\n          <ListGroup \n          style={ { height: '50vh', overflow: 'scroll' } } \n          // variant=\"flush\"\n          >\n            {this.props.items.map((item) => (\n              <SimpleItem\n                key={ item.id }\n                id={ item.id }\n                slug={ item.slug }\n                title={ item.title }\n                description={ item.description }\n                showLinkPath={ this.showLinkPath }\n              />\n            ))}\n          </ListGroup>\n        </HashRouter>\n      </>\n    );\n  }\n}\n\nexport default Playlist;\n","import React, { Component, Suspense } from 'react';\nimport path from 'path';\n// import './index.module.css';\n// import styles from './Transcript.module.css';\n// TODO: perhaps import TranscriptViewer on componentDidMount(?) to defer the load for later\n// https://facebook.github.io/create-react-app/docs/code-splitting\n// import TranscriptViewer from 'slate-transcript-editor';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport ApiWrapper from '../../ApiWrapper/index.js';\nimport Skeleton from '@material-ui/lab/Skeleton';\n\nimport items from '../../playlist.json'\nimport Playlist from '../Playlist/Playlist.js'\n\nconst TranscriptViewer = React.lazy(() => import('../lib/TranscriptViewer'));\n\nconst projectId = null\n\nclass TranscriptView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      transcriptId: this.props.match.params.transcriptId,\n      transcriptJson: null,\n      url: null,\n      projectTitle: '',\n      transcriptTitle: '',\n      savedNotification: null,\n    };\n    this.transcriptViewerRef = React.createRef();\n  }\n\n  componentDidMount = () => {\n    this.updateTranscript()\n  }\n\n  componentDidUpdate = () => {\n    if (this.props.match.params.transcriptId === this.state.transcriptId) {\n      return\n    }\n    this.setState({\n      transcriptId: this.props.match.params.transcriptId,\n    })\n    this.updateTranscript(this.props.match.params.transcriptId)\n  }\n\n  updateTranscript = (transcriptId) => {\n    console.log('update Transcript')\n    ApiWrapper.getTranscript(projectId, transcriptId || this.state.transcriptId)\n    // TODO: add error handling\n    .then(json => {\n      console.log(json.transcriptTitle)\n      this.setState({\n        projectTitle: json.projectTitle,\n        transcriptTitle: json.transcriptTitle,\n        transcriptJson: json.transcript,\n        url: json.url,\n        clipName: json.clipName,\n      });\n    });\n  }\n\n  handleSave = autoSaveData => {\n    console.log('handleSave', autoSaveData);\n    const data = autoSaveData;\n    data.title = this.state.transcriptTitle;\n    data.transcriptTitle = this.state.transcriptTitle;\n    const queryParamsOptions = false;\n  }\n\n  render() {\n    // Workaround to change layout of TranscriptViewer for audio files.\n    // For now only handling limited numnber of file extension that have more of a certainty of being audio\n    // as opposed to more ambiguos extensions such as ogg or mp4 that could be either video or audio\n    // there might be better ways to determine if a clip is audio or video, especially node/\"server side\" but\n    // might also be more of a setup eg using ffprobe etc..\n    let mediaType = 'video';\n    if (\n      path.extname(this.state.clipName) === '.wav' ||\n      path.extname(this.state.clipName) === '.mp3' ||\n      path.extname(this.state.clipName) === '.m4a' ||\n      path.extname(this.state.clipName) === '.flac' ||\n      path.extname(this.state.clipName) === '.aiff'\n    ) {\n      mediaType = 'audio';\n    }\n    return (\n      <>\n        <Container\n          style={{\n            backgroundColor: '#eee',\n          }}\n          fluid\n        >\n          {this.state.transcriptJson !== null && (\n            <Suspense\n              fallback={\n                <Container fluid>\n                  <Row>\n                    <Col xs={12} sm={3} md={3} lg={3} xl={3}>\n                      <Skeleton variant=\"rect\" width={'100%'} height={100} />\n                    </Col>\n                    <Col xs={12} sm={8} md={8} lg={8} xl={8}>\n                      <Skeleton variant=\"rect\" width={'100%'} height={600} />\n                    </Col>\n                    <Col xs={12} sm={1} md={1} lg={1} xl={1}>\n                      <Skeleton variant=\"rect\" width={'100%'} height={350} />\n                    </Col>\n                  </Row>\n                </Container>\n              }\n            >\n              <TranscriptViewer\n                transcriptData={this.state.transcriptJson} // Transcript json\n                mediaUrl={this.state.url} // string url to media file - audio or video\n                // showTitle={true}\n                isEditable={true} // se to true if you want to be able to edit the text\n                title={this.state.transcriptTitle}\n                mediaType={mediaType}\n                autoSaveContentType={'digitalpaperedit'}\n                // handleSaveEditor={this.handleSave}\n                // // handleAutoSaveChanges={ this.handleSave }\n              >\n                <Playlist items={items}/>\n              </TranscriptViewer>\n            </Suspense>\n          )}\n        </Container>\n      </>\n    );\n  }\n}\n\nexport default TranscriptView;\n"],"sourceRoot":""}